<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>NetCDF Overview</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <h1><a name="kanchor5908"></a>NetCDF Overview</h1>
        <p class="Tip" data-mc-autonum="&lt;b&gt;Tip: &lt;/b&gt;"><span class="autonumber"><span><b>Tip: </b></span></span>For information on the current NetCDF version, enter the following at the IDL prompt:</p>
        <p class="Code">HELP, 'ncdf', /DLM</p>
        <p>The Network Common Data Format (NetCDF) is a self-describing scientific data access interface and library developed at the Unidata Program Center in Boulder, Colorado. The netCDF interface and library use XDR (eXternal Data Representation) to make the data format machine-independent.</p>
        <p>IDL’s NetCDF routines all begin with the prefix "NCDF_".</p>
        <h2 class="API"><a name="kanchor5909"></a>Programming Model</h2>
        <h3>Simplified Interface</h3>
        <p>The following commands provide a much simpler interface for working with NetCDF files.</p>
        <ul>
            <li value="1"><a href="NCDF_GET.htm">NCDF_GET</a> - Retrieve variables and attributes from a NetCDF file.</li>
            <li value="2"><a href="NCDF_LIST.htm">NCDF_LIST</a> - Print out a list of variables and attributes from a NetCDF file.</li>
            <li value="3"><a href="NCDF_PUT.htm">NCDF_PUT</a> - Create or modify a NetCDF file.</li>
        </ul>
        <h3>Creating NetCDF Files</h3>
        <p>The following IDL commands should be used to create a new netCDF file:</p>
        <ul>
            <li value="1"><a href="NCDF_CREATE.htm">NCDF_CREATE</a>: Call this procedure to begin creating a new file. The new file is put into <i>define </i>mode.</li>
            <li value="2"><a href="NCDF_DIMDEF.htm">NCDF_DIMDEF</a>: Create dimensions for the file.</li>
            <li value="3"><a href="NCDF_VARDEF.htm">NCDF_VARDEF</a>: Define the variables to be used in the file.</li>
            <li value="4"><a href="NCDF_ATTPUT.htm">NCDF_ATTPUT</a>: Optionally, use attributes to describe the data.</li>
            <li value="5"><a href="NCDF_CONTROL.htm">NCDF_CONTROL</a>, /ENDEF: Call NCDF_CONTROL and set the ENDEF keyword to leave define mode and enter data mode.</li>
            <li value="6"><a href="NCDF_VARPUT.htm">NCDF_VARPUT</a>: Write the appropriate data to the netCDF file.</li>
            <li value="7"><a href="NCDF_CLOSE.htm">NCDF_CLOSE</a>: Close the file.</li>
        </ul>
        <h3>Reading NetCDF Files</h3>
        <p>The following commands should be used to read data from a netCDF file:</p>
        <ul>
            <li value="1"><a href="NCDF_OPEN.htm">NCDF_OPEN</a>: Open an existing netCDF file.</li>
            <li value="2"><a href="NCDF_INQUIRE.htm">NCDF_INQUIRE</a>: Call this function to find the format of the netCDF file.</li>
            <li value="3"><a href="NCDF_DIMINQ.htm">NCDF_DIMINQ</a>: Retrieve the names and sizes of dimensions in the file.</li>
            <li value="4"><a href="NCDF_VARINQ.htm">NCDF_VARINQ</a>: Retrieve the names, types, and sizes of variables in the file.</li>
            <li value="5"><a href="NCDF_ATTNAME.htm">NCDF_ATTNAME</a>: Optionally, retrieve attribute names.</li>
            <li value="6"><a href="NCDF_ATTINQ.htm">NCDF_ATTINQ</a>: Optionally, retrieve the types and lengths of attributes.</li>
            <li value="7"><a href="NCDF_ATTGET.htm">NCDF_ATTGET</a>: Optionally, retrieve the attributes.</li>
            <li value="8"><a href="NCDF_VARGET.htm">NCDF_VARGET</a>: Read the data from the variables.</li>
            <li value="9"><a href="NCDF_CLOSE.htm">NCDF_CLOSE</a>: Close the file.</li>
        </ul>
        <p>If the structure of the netCDF file is already known, the inquiry routines do not need to be called—only NCDF_OPEN, NCDF_ATTGET, NCDF_VARGET, and NCDF_CLOSE would be needed.</p>
        <h2 class="API"><a name="kanchor5910"></a>Code Examples</h2>
        <p>Two example files that demonstrate the use of the netCDF routines can be found in the <code>examples/doc/sdf</code> subdirectory of the IDL distribution. The file <code>ncdf_cat.pro</code> prints a summary of basic information about a netCDF file. The file <code>ncdf_rdwr.pro</code> creates a new netCDF file and then reads the information back from that file. Run these example procedures by entering <code>ncdf_cat</code> or <code>ncdf_rdwr</code> at the IDL command prompt or view the files in an IDL Editor window by entering <code>.EDIT ncdf_cat.pro</code> or <code>.EDIT ncdf_rdwr.pro</code>.</p>
        <h3>A Complete Example with Unlimited Dimensions</h3>
        <p>The following example shows how to create a netCDF file, populate it with data, read data from the file, and make a simple plot from the data.</p>
        <p>
            <img src="../../images/ncdf01.gif" />
        </p>
        <p class="Code">; Create a new NetCDF file with the filename inquire.nc:</p>
        <p class="Code">id = NCDF_CREATE('inquire.nc', /CLOBBER)</p>
        <p class="Code">; Fill the file with default values:</p>
        <p class="Code">NCDF_CONTROL, id, /FILL</p>
        <p class="Code">; We’ll create some time-dependent data, so here is an</p>
        <p class="Code">; array of hours from 0 to 5:</p>
        <p class="Code">hours = INDGEN(5)</p>
        <p class="Code">; Create a 5 by 10 array to hold floating-point data:</p>
        <p class="Code">data = FLTARR(5,10)</p>
        <p class="Code">; Generate some values.</p>
        <p class="Code">FOR i=0,9 DO $</p>
        <p class="Code">data(*,i) = (i+0.5) * EXP(-hours/2.) / SIN((i+1)/30.*!PI)</p>
        <p class="Code">xid = NCDF_DIMDEF(id, 'x', 10)    ; Make dimensions.</p>
        <p class="Code">zid = NCDF_DIMDEF(id, 'z', /UNLIMITED)</p>
        <p class="Code">; Define variables:</p>
        <p class="Code">hid = NCDF_VARDEF(id, 'Hour', [zid], /SHORT)</p>
        <p class="Code">vid = NCDF_VARDEF(id, 'Temperature', [xid,zid], /FLOAT)</p>
        <p class="Code">NCDF_ATTPUT, id, vid, 'units', 'Degrees x 100 F'</p>
        <p class="Code">NCDF_ATTPUT, id, vid, 'long_name', 'Warp Core Temperature'</p>
        <p class="Code">NCDF_ATTPUT, id, hid, 'long_name', 'Hours Since Shutdown'</p>
        <p class="Code">NCDF_ATTPUT, id, /GLOBAL, 'Title', 'Really important data'</p>
        <p class="Code">; Put file in data mode:</p>
        <p class="Code">NCDF_CONTROL, id, /ENDEF</p>
        <p class="Code">; Input data:</p>
        <p class="Code">NCDF_VARPUT, id, hid, hours</p>
        <p class="Code">FOR i=0,4 DO NCDF_VARPUT, id, vid, $</p>
        <p class="Code">; Oops! We forgot the 6th hour! This is not a problem, however,</p>
        <p class="Code">; as you can dynamically expand a netCDF file if the unlimited</p>
        <p class="Code">; dimension is used.</p>
        <p class="Code">REFORM(data(i,*)), OFFSET=[0,i]</p>
        <p class="Code">; Add the hour and data:</p>
        <p class="Code">NCDF_VARPUT, id, hid, 6, OFFSET=[5]</p>
        <p class="Code">; Add the temperature:</p>
        <p class="Code">NCDF_VARPUT, id, vid, FINDGEN(10)*EXP(-6./2), OFFSET=[0,5]</p>
        <p class="Code">; Read the data back out:</p>
        <p class="Code">NCDF_VARGET, id, vid, output_data</p>
        <p class="Code">NCDF_ATTGET, id, vid, 'long_name', ztitle</p>
        <p class="Code">NCDF_ATTGET, id, hid, 'long_name', ytitle</p>
        <p class="Code">NCDF_ATTGET, id, vid, 'units', subtitle</p>
        <p class="Code">!P.CHARSIZE = 2.5</p>
        <p class="Code">!X.TITLE = 'Location'</p>
        <p class="Code">!Y.TITLE = STRING(ytitle) ; Convert from bytes to strings.</p>
        <p class="Code">!Z.TITLE = STRING(ztitle) + '!C' + STRING(subtitle)</p>
        <p class="Code">NCDF_CLOSE, id ; Close the NetCDF file.</p>
        <p class="Code">SHOW3, output_data ; Display the data.</p>
        <h3>Type Conversion</h3>
        <p>Values are converted to the appropriate type before being written to a netCDF file. For example, in the commands below, IDL converts the string "12" to a floating-point 12.0 before writing it:</p>
        <p class="Code">varid=NCDF_VARDEF(fileid, 'VarName', [d0,d1,d2+d3], /FLOAT)</p>
        <p class="Code">NCDF_VARPUT, fileid, 'VarName', '12'</p>
        <h3>Specifying Attributes and Variables</h3>
        <p>Variables and attributes can be referred to either by name or by their ID numbers in most netCDF routines. For example, given the NCDF_VARDEF command shown below, the two NCDF_VARPUT commands shown after it are equivalent:</p>
        <p class="Code">varid = NCDF_VARDEF(fileid, 'VarName', [d0,d1,d2+d3], /FLOAT)</p>
        <p class="Code">; Reference by variable name:</p>
        <p class="Code">NCDF_VARPUT, fileid, 'VarName', '12'</p>
        <p class="Code">; Reference by variable ID:</p>
        <p class="Code">NCDF_VARPUT, fileid, varid,'12'</p>
        <h3>String Data in NetCDF Files</h3>
        <p>Strings are stored as arrays of ASCII bytes in netCDF files. To read string data from netCDF files, use the STRING function to convert bytes back into characters. When writing an IDL string array to a variable, an extra dimension (the maximum string length) must be added to the variable definition. Both of these situations are illustrated by the following example:</p>
        <p class="Code">; Make a test string:</p>
        <p class="Code">string_in = REPLICATE('Test String',10,10)</p>
        <p class="Code">; Make one element longer than the others:</p>
        <p class="Code">string_in(0,0) = 'Long Test String'</p>
        <p class="Code">HELP, string_in</p>
        <p class="Code">; Create a new netCDF file:</p>
        <p class="Code">ncdfid = NCDF_CREATE('string.nc', /CLOBBER)</p>
        <p class="Code">; Define first dimension:</p>
        <p class="Code">xid = NCDF_DIMDEF(ncdfid, 'height', 10)</p>
        <p class="Code">; Define second dimension:</p>
        <p class="Code">yid = NCDF_DIMDEF(ncdfid, 'width', 10)</p>
        <p class="Code">; Find the length of the longest string and use that as the</p>
        <p class="Code">; third dimension:</p>
        <p class="Code">zid = NCDF_DIMDEF(ncdfid, 'length', MAX(STRLEN(string_in)))</p>
        <p class="Code">; Define the variable with dimensions zid, yid, xid:</p>
        <p class="Code">id = NCDF_VARDEF(ncdfid, 'strings', [zid,yid,xid], /CHAR)</p>
        <p class="Code">; Put the file into data mode:</p>
        <p class="Code">NCDF_CONTROL, ncdfid, /ENDEF</p>
        <p class="Code">; Write the string variable. The array will be stored as bytes</p>
        <p class="Code">; in the file:</p>
        <p class="Code">NCDF_VARPUT, ncdfid, id, string_in</p>
        <p class="Code">; Read the byte array back out:</p>
        <p class="Code">NCDF_VARGET, ncdfid, id, byte_out</p>
        <p class="Code">NCDF_CLOSE, ncdfid ; Close the file.</p>
        <p class="Code">HELP, byte_out</p>
        <p class="Code">; IDL reports that BYTE_OUT is a (16, 10, 10) BYTE array.</p>
        <p class="Code">PRINT, STRING(byte_out(*,0,0))</p>
        <p class="Code">; Taking the STRING of the first "row" of byte_out returns the</p>
        <p class="Code">; first element of our original array, "Long Test String".</p>
        <p class="Code">; Convert the entire byte array back into strings:</p>
        <p class="Code">string_new = STRING(byte_out)</p>
        <p class="Code">; The new string array has the same dimensions and values as</p>
        <p class="Code">; our original string, string_in.</p>
        <p class="Code">HELP, string_new</p>
        <p class="Code">; This statement compares the two arrays and prints "Success!" if</p>
        <p class="Code">; they are equal, and they are:</p>
        <p class="Code">IF TOTAL(string_in NE string_new) EQ 0 THEN PRINT, 'Success!'</p>
        <h2 class="API"><a name="kanchor5911"></a>NetCDF Data Modes</h2>
        <p>There are two modes associated with accessing a netCDF file: <i>define</i> mode and <i>data</i> mode. In define mode, dimensions, variables, and new attributes can be created but variable data cannot be read or written. In data mode, data can be read or written and attributes can be changed, but new dimensions, variables, and attributes cannot be created.</p>
        <p>IDL’s NCDF_CONTROL routine can be used control the mode of a netCDF file. The only time it is not necessary to set the mode with NCDF_CONTROL is when using the NCDF_CREATE procedure to create a new file. NCDF_CREATE places the new netCDF file into define mode automatically.</p>
        <h2 class="API">Attributes, Dimensions, and Variables</h2>
        <p>The three basic components of a netCDF file are described below.</p>
        <h3><a name="kanchor5912"></a>Attributes</h3>
        <p>Attributes can contain auxiliary information about an entire netCDF file (<i>global</i> attributes) or about a single netCDF variable. Every attribute has a name, data type, and length associated with it. It is common to repeat attribute names for each variable. For example, every variable in a netCDF file might have an attribute named "Units". Note however, that variables cannot have multiple attributes with the same names.</p>
        <h3><a name="kanchor5913"></a>Dimensions</h3>
        <p>Dimensions are named integers that are used to specify the size (or <i>dimensionality</i>) of one or more variables. Each dimension must have a unique name, but a variable and dimension can share a name. Each netCDF file is allowed to have one boundless (or <i>unlimited</i>) dimension. Most often the unlimited dimension is used as a temporal variable, allowing data to be appended to an existing netCDF file. An example of this use is shown later.</p>
        <h3><a name="kanchor5914"></a>Variables</h3>
        <p>Variables are multidimensional arrays of values of the same data type. Each variable has a size, type, and name associated with it. Variables can also have <i>attributes </i>that describe them.</p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>