<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: S">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>SHADE_SURF Procedure</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="S_list.htm">Routines: S</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">SHADE_SURF Procedure</span>
        </div>
        <h1 class="Routine"><a name="dg_routines_3604229493_885128"></a><a name="dg_routines_3604229493_80802"></a>SHADE_SURF Procedure</h1>
        <p><a name="kanchor2356"></a><a name="kanchor2357"></a>The SHADE_SURF procedure creates a shaded-surface representation of a regular or nearly-regular gridded surface with shading from either a light source model or from a user-specified array of intensities. Displays are easily constructed depicting the surface elevation of a variable shaded as a function of itself or another variable. This procedure and its parameters are similar to SURFACE, but it renders the visible surface as a shaded image rather than a mesh. Given a regular or near-regular grid of elevations it produces a shaded-surface representation of the data with hidden surfaces removed.</p>
        <p>The <a href="SET_SHADING_Procedure.htm#dg_routines_3604229493_884993">SET_SHADING Procedure</a> procedure can be used to control the direction of the light source and other shading parameters.</p>
        <p>If the graphics output device has scalable pixels (e.g., PostScript), the output image is scaled so that its largest dimension is less than or equal to 512 (unless the PIXELS keyword is set to some other value). This default resolution may not be high enough for some datasets. If your output looks jagged or “stair-stepped”, try specifying a larger value with the PIXELS keyword.</p>
        <p>When outputting to a device that prints black on a white background, (e.g., PostScript), pixels that contain the background color index of 0 are set to white.</p>
        <h3><a name="dg_routines_3604229493_885162"></a><a name="dg_routines_3604229493_678741_PageTOC_SHADE_SURF_"></a>Restrictions</h3>
        <p>If the <i>(X, Y)</i> grid is not regular or nearly regular, errors in hidden line removal will occur. If the T3D keyword is set, the 3-D to 2-D transformation matrix contained in !P.T must project the Z axis to a line parallel to the device Y axis, or errors will occur. The SHADE_SURF_IRR procedure can be used to render many datasets that do not meet these requirements. Irregularly-gridded data can also be made interpolated to a regular grid using the TRIGRID and TRIANGULATE routines.</p>
        <h2 class="API"><a name="dg_routines_3604229493_885165"></a><a name="dg_routines_3604229493_678743_PageTOC_SHADE_SURF_"></a>Syntax</h2>
        <p class="Syntax">SHADE_SURF, <i>Z</i> [,&#160;<i>X</i>, <i>Y</i>] [,&#160;<a href="#dg_routines_3604229493_885212" class="selected">AX</a>=<i>degrees</i>] [,&#160;<a href="#dg_routines_3604229493_885218" class="selected">AZ</a>=<i>degrees</i>] [,&#160;<a href="#dg_routines_3604229493_885221" class="selected">IMAGE</a>=<i>variable</i>] [,&#160;<a href="#dg_routines_3604229493_885224" class="selected">MAX_VALUE</a>=<i>value</i>] [,&#160;<a href="#dg_routines_3604229493_885231" class="selected">MIN_VALUE</a>=<i>value</i>] [,&#160;<a href="#dg_routines_3604229493_885237" class="selected">PIXELS</a>=<i>pixels</i>] [,&#160;/<a href="#dg_routines_3604229493_885240" class="selected">SAVE</a>] [,&#160;<a href="#dg_routines_3604229493_885243" class="selected">SHADES</a>=<i>array</i>] [,&#160;/<a href="#dg_routines_3604229493_885250" class="selected">XLOG</a>] [,&#160;/<a href="#dg_routines_3604229493_885254" class="selected">YLOG</a>]</p>
        <p class="Syntax"><b>Graphics Keywords:</b>[,&#160;CHARSIZE=<i>value</i>] [,&#160;CHARTHICK=<i>integer</i>] [,&#160;COLOR=<i>value</i>][,&#160;/DATA | , /DEVICE | , /NORMAL] [,&#160;FONT=<i>integer</i>] [,&#160;/NODATA] [,&#160;POSITION=<i>[X</i><sub class="italic">0</sub>, <i>Y</i><sub class="italic">0</sub>, <i>X</i><sub class="italic">1</sub>, <i>Y</i><sub class="italic">1</sub><i>]</i>] [,&#160;SUBTITLE=<i>string</i>] [,&#160;/T3D] [,&#160;THICK=<i>value</i>] [,&#160;TICKLEN=<i>value</i>] [,&#160;TITLE=<i>string</i>] <br />[,&#160;{X | Y | Z}CHARSIZE=<i>value</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}GRIDSTYLE=<i>integer</i>{0 to 5}] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}MARGIN=<i>[left</i>, <i>right]</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}MINOR=<i>integer</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}RANGE=<i>[min</i>, <i>max]</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}STYLE=<i>value</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}THICK=<i>value</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}TICKFORMAT=<i>string</i>] <br />[, {X | Y | Z}TICKINTERVAL= <i>value</i>] <br />[,&#160;{X | Y | Z}TICKLAYOUT=<i>scalar</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}TICKLEN=<i>value</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}TICKNAME=<i>string_array</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;| Z}TICKS=<i>integer</i>] <br />[,&#160;{X | Y | Z}TICKUNITS=<i>string</i>]<br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}TICKV=<i>array</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}TICK_GET=<i>variable</i>] <br />[,&#160;{X&#160;|&#160;Y&#160;|&#160;Z}TITLE=<i>string</i>] <br />[,&#160;ZVALUE=<i>value</i>{0 to 1}]</p>
        <h2 class="API"><a name="dg_routines_3604229493_885199"></a><a name="dg_routines_3604229493_678745_PageTOC_SHADE_SURF_"></a>Arguments</h2>
        <h3 class="Argument">Z</h3>
        <p>The two-dimensional array to be displayed. If <i>X</i> and <i>Y</i> are provided, the surface is plotted as a function of the (<i>X</i>, <i>Y</i>) locations specified by their contents. Otherwise, the surface is generated as a function of the array index of each element of <i>Z</i>.</p>
        <p>This argument is converted to double-precision floating-point before plotting. Plots created with SHADE_SURF are limited to the range and precision of double-precision floating-point values.</p>
        <h3 class="Argument">X</h3>
        <p>A vector or two-dimensional array specifying the X coordinates of the grid. If this argument is a vector, each element of <i>X</i> specifies the X coordinate for a column of <i>Z</i> (e.g., <code>X[0]</code> specifies the X coordinate for <code>Z[0,*]</code>). If <i>X</i> is a two-dimensional array, each element of <i>X</i> specifies the X coordinate of the corresponding point in <i>Z</i> (<i>X</i><sub class="italic">ij</sub> specifies the X coordinate for <i>Z</i><sub class="italic">ij</sub>).</p>
        <p>This argument is converted to double-precision floating-point before plotting.</p>
        <h3 class="Argument">Y</h3>
        <p>A vector or two-dimensional array specifying the Y coordinates of the grid. If this argument is a vector, each element of <i>Y</i> specifies the Y coordinate for a row of <i>Z</i> (e.g., <code>Y[0]</code> specifies the Y coordinate for <code>Z[*,0]</code>). If <i>Y</i> is a two-dimensional array, each element of <i>Y</i> specifies the Y coordinate of the corresponding point in <i>Z</i> (<i>Y</i><sub class="italic">ij</sub> specifies the Y coordinate for <i>Z</i><sub class="italic">ij</sub>).</p>
        <p>This argument is converted to double-precision floating-point before plotting.</p>
        <h2 class="API"><a name="dg_routines_3604229493_885210"></a><a name="dg_routines_3604229493_678753_PageTOC_SHADE_SURF_"></a>Keywords</h2>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885212"></a><a name="dg_routines_3604229493_678754_Keywords_SHADE_SURF__"></a>AX</h3>
        <p>This keyword specifies the angle of rotation, about the X axis, in degrees towards the viewer. This keyword is effective only if !P.T3D and the T3D keyword are not set. If !P.T3D is set, the three-dimensional to two-dimensional transformation used by SURFACE is contained in the 4 by 4 array !P.T.</p>
        <p>The surface represented by the two-dimensional array is first rotated, AZ (see below) degrees about the Z axis, then by AX degrees about the X axis, tilting the surface towards the viewer (AX &gt; 0), or away from the viewer.</p>
        <p>The AX and AZ keyword parameters default to +30 degrees if omitted.</p>
        <p>The three-dimensional to two-dimensional transformation represented by AX and AZ, can be saved in !P.T by including the SAVE keyword.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885218"></a><a name="dg_routines_3604229493_678759_Keywords_SHADE_SURF__"></a>AZ</h3>
        <p>This keyword specifies the counterclockwise angle of rotation about the Z axis. This keyword is effective only if !P.T3D is not set. The order of rotation is AZ first, then AX.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885221"></a><a name="dg_routines_3604229493_678761_Keywords_SHADE_SURF__"></a>IMAGE</h3>
        <p>A named variable into which an image containing the shaded surface is stored. If this keyword is omitted, the image is displayed but not saved.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885224"></a><a name="dg_routines_3604229493_678763_Keywords_SHADE_SURF__"></a>MAX_VALUE</h3>
        <p>The maximum value to be plotted. If this keyword is present, data values greater than the value of MAX_VALUE are treated as missing and are not plotted. Note that the IEEE floating-point value NaN is also treated as missing data<a name="kanchor2358"></a>.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885231"></a><a name="dg_routines_3604229493_47127_Keywords_SHADE_SURF__"></a>MIN_VALUE</h3>
        <p>The minimum value to be plotted. If this keyword is present, data values less than the value of MIN_VALUE are treated as missing and are not plotted. Note that the IEEE floating-point value NaN is also treated as missing data. </p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885237"></a><a name="dg_routines_3604229493_844042_Keywords_SHADE_SURF__"></a>PIXELS</h3>
        <p>Set this keyword to a scalar value that specifies the maximum size of the image dimensions, in pixels. PIXELS only applies when the output device uses scalable pixels (e.g., the PostScript device). Use this keyword to increase the resolution of the output image if the default looks jagged or “stair-stepped”.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885240"></a><a name="dg_routines_3604229493_678765_Keywords_SHADE_SURF__"></a>SAVE</h3>
        <p>Set this keyword to save the 3-D to 2-D transformation matrix established by SHADE_SURF in the system variable field !P.T. Use this keyword when combining the output of SHADE_SURF with the output of other routines in the same plot.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885243"></a><a name="dg_routines_3604229493_678767_Keywords_SHADE_SURF__"></a>SHADES</h3>
        <p>An array expression, of the same dimensions as <i>Z</i>, that contains the color index at each point. The shading of each pixel is interpolated from the surrounding SHADE values. If this parameter is omitted, light-source shading is used. For most displays, this parameter should be scaled into the range of bytes.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>When using the SHADES keyword on True Color devices, we recommend that decomposed color support be turned off, by setting DECOMPOSED=0 for <a href="../D/DEVICE_Procedure.htm#dg_routines_3604229493_882302">DEVICE Procedure</a>.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885250"></a><a name="dg_routines_3604229493_158361_Keywords_SHADE_SURF__"></a>XLOG</h3>
        <p>Set this keyword to specify a logarithmic X axis<a name="kanchor2359"></a>.</p>
        <h3 class="Keyword"><a name="dg_routines_3604229493_885254"></a><a name="dg_routines_3604229493_158393_Keywords_SHADE_SURF__"></a>YLOG</h3>
        <p>Set this keyword to specify a logarithmic Y axis.</p>
        <h3><a name="dg_routines_3604229493_885258"></a><a name="dg_routines_3604229493_678773_Keywords_SHADE_SURF__"></a><a name="dg_routines_3604229493_678773_PageTOC_SHADE_SURF_"></a>Graphics Keywords Accepted</h3>
        <p>See <a href="../../Direct Graphics/graphkeyw.htm">Direct Graphics Keywords</a> for the description of the following graphics and plotting keywords:</p>
        <p><a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_266973">CHARSIZE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_331668">CHARTHICK</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_371352">COLOR</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_315961">DATA</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_369990">DEVICE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_331795">FONT</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_371086">NODATA</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_315963">NORMAL</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_316026">POSITION</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_316057">SUBTITLE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_315956">T3D</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_316006">THICK</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332207">TICKLEN</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332238">TITLE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_331699">[XYZ]CHARSIZE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332009">[XYZ]GRIDSTYLE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332038">[XYZ]MARGIN</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332061">[XYZ]MINOR</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332090">[XYZ]RANGE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332116">[XYZ]STYLE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332298">[XYZ]THICK</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_370350">[XYZ]TICKFORMAT</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332463">[XYZ]TICKINTERVAL</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332488">[XYZ]TICKLAYOUT</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332513">[XYZ]TICKLEN</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332536">[XYZ]TICKNAME</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332559">[XYZ]TICKS</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332586">[XYZ]TICKUNITS</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332628">[XYZ]TICKV</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_332321">[XYZ]TICK_GET</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_316100">[XYZ]TITLE</a>, <a href="../../Direct Graphics/graphkeyw.htm#graphkeyw_3288778166_316102">ZVALUE</a></p>
        <h2 class="API"><a name="dg_routines_3604229493_885361"></a><a name="dg_routines_3604229493_678775_PageTOC_SHADE_SURF_"></a>Examples</h2>
        <p class="Code">; Create a simple dataset:<br />D = DIST(40)<br />; Display the dataset as a light-source shaded surface:<br />SHADE_SURF, D, TITLE = 'Shaded Surface'</p>
        <p>Instead of light-source shading, an array of the same size as the elevation dataset can be used to color the surface. This technique creates four-dimensional displays. </p>
        <p class="Code">; Create an array of shades to use:<br />S = SIN(D)<br /><br />; Now create a new shaded surface that uses the array of shading<br />; values instead of the light source:<br />SHADE_SURF, D, SHADES = BYTSCL(S)</p>
        <p>Note that the BYTSCL function is used to scale S into the range of bytes.</p>
        <p>The following figure illustrates the application of SHADE_SURF, with light-source shading, to the two-dimensional Gaussian. This figure was produced by the following statements.</p>
        <p class="Code">; Create a 40-by-40 array in which each element<br />; is equal to the Euclidean distance from the center.<br />Z = SHIFT(DIST(40), 20, 20)<br />; Make Gaussian with a 1/e width of 10:<br />Z = EXP(-(Z/10)^2) <br />SHADE_SURF, Z</p>
        <p>The right half of the following figure shows the use of an array of shades, which in this case is simply the surface elevation scaled into the range of bytes.</p>
        <p>
            <img src="../../Resources/Images/mult16.gif" />
        </p>
        <p>The output of SURFACE is superimposed over the shaded image with the statements below.</p>
        <p class="Code">; Show Gaussian with shades created by scaling<br />; elevation into the range of bytes.<br />SHADE_SURF, Z, SHADES=BYTSCL(Z, TOP = !D.TABLE_SIZE)<br />; Draw the mesh surface over the shaded figure.<br />; Suppress the axes:<br />SURFACE, Z, XST = 4, YST = 4, ZST = 4, /NOERASE</p>
        <p>The next figure shows the Maroon Bells data as a light-source shaded surface. It was produced by the following statements:</p>
        <p class="Code">; Restore variables.<br />@cntour01<br />SHADE_SURF, elev, AZ=210, AX=45, XST=4, YST=4, ZST=4</p>
        <p>The AX and AZ keywords specify the orientation. The axes are suppressed by the axis-style keyword parameters; as in this orientation, the axes are behind the surface. </p>
        <p>
            <img src="../../Resources/Images/mult17.gif" />
        </p>
        <h2 class="API"><a name="dg_routines_3604229493_885411"></a><a name="dg_routines_3604229493_795769_PageTOC_SHADE_SURF_"></a>Version History</h2>
        <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>Original</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="dg_routines_3604229493_885419"></a><a name="dg_routines_3604229493_1110285_PageTOC_SHADE_SURF_"></a>See Also</h2>
        <p>ISURFACE, <a href="../P/POLYSHADE_Procedure.htm#dg_routines_3604229493_892899">POLYSHADE Procedure</a>, <a href="SET_SHADING_Procedure.htm#dg_routines_3604229493_884993">SET_SHADING Procedure</a>, <a href="SHADE_VOLUME_Procedure.htm#dg_routines_3604229493_885531">SHADE_VOLUME Procedure</a>, <a href="SURFACE_Procedure.htm#dg_routines_3604229493_886816">SURFACE Procedure</a></p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>