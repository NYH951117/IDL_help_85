<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: X">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>XPALETTE Procedure</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="X_list.htm">Routines: X</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">XPALETTE Procedure</span>
        </div>
        <h1 class="Routine"><a name="dg_routines_3604229493_917243"></a><a name="kanchor3040"></a><a name="dg_routines_3604229493_10360"></a><a name="kanchor3041"></a>XPALETTE Procedure</h1>
        <p>The XPALETTE procedure is a utility that displays a widget interface that allows interactive creation and modification of color tables using the RGB, CMY, HSV, or HLS color systems. This procedure can interpolate the space between color indices (to create smooth color transitions) or edit individual colors. </p>
        <p>This routine is written in the IDL language. Its source code can be found in the file <code>xpalette.pro</code> in the <code>lib/utilities</code> subdirectory of the IDL distribution.</p>
        <h3><a name="dg_routines_3604229493_917269"></a><a name="dg_routines_3604229493_761943_PageTOC_XPALETTE_"></a>Using the XPALETTE Interface</h3>
        <p>Calling XPALETTE causes a graphical interface to appear. The elements of this interface are described below.</p>
        <h4>Plots on Left Side of Interface</h4>
        <p>Three plots show the current red, green, and blue vectors. </p>
        <h4>Status Region</h4>
        <p>The center of the XPALETTE widget is a status region containing:</p>
        <ul>
            <li value="1">The total number of colors.</li>
            <li value="2">The current color index. XPALETTE allows changing one color at a time. This color is known as the “current color” and is indicated in the color spectrum display with a special marker.</li>
            <li value="3">The current mark index. The mark is used to remember a color index. Click the “Set Mark Button” to make the current color index the mark index.</li>
            <li value="4">A sample of the current color. The special marker used in the color spectrum display prevents the user from seeing the color of the current index, but it is visible here. </li>
        </ul>
        <h4>Control Panel</h4>
        <p>A panel of 8 buttons control common XPALETTE functions: </p>
        <ul>
            <li value="1"><b>Done:</b> Click this button to exit XPALETTE. The new color tables are saved in the COLORS common block and loaded to the display.</li>
            <li value="2"><b>Predefined: </b>Click this button to start XLOADCT, allowing selection of one of the predefined color tables. Note that when you change the color map via XLOADCT, XPALETTE is not always able to keep its display accurate. This problem can be overcome by pressing the XPALETTE “Redraw” button after changing the colortable via XLOADCT. </li>
            <li value="3"><b>Help: </b>Click this button to display help information.</li>
            <li value="4"><b>Redraw: </b>Click this button to redraw the display using the current state of the color map.</li>
            <li value="5"><b>Set Mark: </b>Click this button to set the value of the mark index to the current color index.</li>
            <li value="6"><b>Switch Mark: </b>Click this button to exchange the mark and the current index. </li>
            <li value="7"><b>Copy Current: </b>Click this button to make every color lying between the current index and the mark index (inclusive) the same color as the current color.</li>
            <li value="8"><b>Interpolate: </b>Click this button to smoothly interpolate colors between the current index and the mark index.</li>
        </ul>
        <h4>Color System Control</h4>
        <p>This section of the interface allows you to select the color system used to modify individual colors. The “Select Color System” pulldown menu lets you select from four different systems—RGB, CMY, HSV, and HLS. Depending upon the current system, 3 sliders below the pulldown menu allow you to alter the current color.</p>
        <h4>Right Side Color Spectrum Display</h4>
        <p>A display on the right side of the XPALETTE interface shows the current color map as a series of squares. Color index 0 is at the upper left. The color index increases monotonically by rows going left to right and top to bottom. The current color index is indicated by a special marker symbol. There are 4 ways to change the current color:</p>
        <ul>
            <li value="1">Click on any square in the color map display.</li>
            <li value="2">Use the “By Index” slider to move to the desired color index.</li>
            <li value="3">Use the “Row” Slider to move the marker vertically.</li>
            <li value="4">Use the “Column” Slider to move the marker horizontally.</li>
        </ul>
        <h3><a name="dg_routines_3604229493_917298"></a><a name="dg_routines_3604229493_761971_PageTOC_XPALETTE_"></a>A Note about the Colors Used in the Interface</h3>
        <p>XPALETTE uses two colors from the current color table as drawing foreground and background colors. These are used for the RGB plots on the left, and the current index marker on the right. This means that if the user set these two colors to the same value, the XPALETTE display could become unreadable (like writing on black paper with black ink). XPALETTE minimizes this possibility by noting changes to the color map and always using the brightest available color for the foreground color and the darkest for the background. Thus, the only way to make XPALETTE’s display unreadable is to set the entire color map to a single color, which is highly unlikely. The only side effect of this policy is that you may notice XPALETTE redrawing the entire display after you’ve modified the current color. This simply means that the change has made XPALETTE pick new drawing colors. </p>
        <h2 class="API"><a name="dg_routines_3604229493_917301"></a><a name="dg_routines_3604229493_761937_PageTOC_XPALETTE_"></a>Syntax</h2>
        <p class="Syntax">XPALETTE [,&#160;/<a href="#dg_routines_3604229493_917321" class="selected">BLOCK</a>] [,&#160;<a href="#dg_routines_3604229493_917331" class="selected">GROUP</a>=<i>widget_id</i>] [,&#160;<a href="#dg_routines_3604229493_917334" class="selected">UPDATECALLBACK</a>=‘<i>procedure_name</i>’ [,&#160;<a href="#dg_routines_3604229493_917337" class="selected">UPDATECBDATA</a>=<i>value</i>]]</p>
        <h2 class="API"><a name="dg_routines_3604229493_917316"></a><a name="dg_routines_3604229493_25990"></a>Arguments </h2>
        <p>None</p>
        <h2 class="API"><a name="dg_routines_3604229493_917319"></a><a name="dg_routines_3604229493_761939_PageTOC_XPALETTE_"></a>Keywords</h2>
        <h3><a name="dg_routines_3604229493_917321"></a><a name="dg_routines_3604229493_937555_Keywords_XPALETTE__"></a>BLOCK</h3>
        <p>Set this keyword to have XMANAGER <i>block</i> when this application is registered. By default, BLOCK is set equal to zero, providing access to the command line if active command line processing is available. Note that setting BLOCK=1 will cause <i>all</i> widget applications to block, not just this application. For more information, see the documentation for the NO_BLOCK keyword to XMANAGER.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>Only the outermost call to XMANAGER can block. Therefore, to have XPALETTE block, any earlier calls to XMANAGER must have been called with the NO_BLOCK keyword. See the documentation for the NO_BLOCK keyword to XMANAGER for an example.</p>
        <h3><a name="dg_routines_3604229493_917331"></a><a name="dg_routines_3604229493_761941_Keywords_XPALETTE__"></a>GROUP</h3>
        <p>The widget ID of the widget that calls XPALETTE. When this ID is specified, a death of the caller results in a death of XPALETTE.</p>
        <h3><a name="dg_routines_3604229493_917334"></a><a name="dg_routines_3604229493_949914_Keywords_XPALETTE__"></a>UPDATECALLBACK</h3>
        <p>Set this keyword to a string containing the name of a user-supplied procedure that will be called when the color table is updated by XLOADCT. The procedure may optionally accept a keyword called DATA, which will be automatically set to the value specified by the optional UPDATECBDATA keyword.</p>
        <h3><a name="dg_routines_3604229493_917337"></a><a name="dg_routines_3604229493_949916_Keywords_XPALETTE__"></a>UPDATECBDATA</h3>
        <p>Set this keyword to a value of any type. It will be passed via the DATA keyword to the user-supplied procedure specified via the UPDATECALLBACK keyword, if any. If the UPDATECBDATA keyword is not set the value accepted by the DATA keyword to the procedure specified by UPDATECALLBACK will be undefined.</p>
        <h2 class="API"><a name="dg_routines_3604229493_917340"></a><a name="dg_routines_3604229493_70496"></a>Examples</h2>
        <p>This example uses a single color (orange) to highlight pixels within the spine of the CT scan image. Then, starting with the entry that was changed to orange, a range of entries is selected and replaced with a ramp from orange to white to highlight the bones within this image. Complete the following steps for a detailed description of the process. </p>
        <p class="ExampleCode">See <code>usingxpalette.<a name="kanchor3042"></a>pro</code> in the <code>examples/doc/image</code> subdirectory of the IDL installation directory for code that duplicates this example. Run the example procedure by entering <code>usingxpalette</code> at the IDL command prompt or view the file in an IDL Editor window by entering <code>.EDIT usingxpalette.pro</code>. The BLOCK keyword is set when using XPALETTE to force the example routine to wait until the <b>Done</b> button is pressed to continue. If the BLOCK keyword was not set, the example routine would produce all of the displays at once and then end.</p>
        <ol>
            <li value="1">
                <p>Determine the path to the <code>ctscan.dat</code> binary file:</p>
                <p class="Code">ctscanFile = FILEPATH('ctscan.dat', $</p>
                <p class="Code">&#160;&#160;&#160;SUBDIRECTORY = ['examples', 'data'])</p>
            </li>
            <li value="2">
                <p>Initialize the image size parameter:</p>
                <p class="Code">ctscanSize = [256, 256]</p>
            </li>
            <li value="3">
                <p>Import the image from the file:</p>
                <p class="Code">ctscanImage = READ_BINARY(ctscanFile, $</p>
                <p class="Code">   DATA_DIMS = ctscanSize)</p>
            </li>
            <li value="4">
                <p>If you are running IDL on a TrueColor display, set the DECOMPOSED keyword to the DEVICE command to zero before your first color table related routine is used within an IDL session or program. </p>
                <p class="Code">DEVICE, DECOMPOSED = 0</p>
            </li>
            <li value="5" data-mc-conditions="Direct Graphics.Comment">
                <p>
                    <MadCap:conditionalText data-mc-conditions="Direct Graphics.Comment">If you are running IDL on X Windows, set the RETAIN keyword to the DEVICE command to two before displaying your first IDL window within an IDL session or program. </MadCap:conditionalText> <![CDATA[ ]]></p>
                <p class="Code" data-mc-conditions="Direct Graphics.Comment">
                    <MadCap:conditionalText data-mc-conditions="Direct Graphics.Comment">DEVICE, RETAIN = 2</MadCap:conditionalText>
                </p>
            </li>
            <li value="6">
                <p>Display the image from the <code>ctscan.dat</code> file with the B-W LINEAR color table:</p>
                <p class="Code">LOADCT, 0</p>
                <p class="Code">WINDOW, 0, TITLE = 'ctscan.dat', $</p>
                <p class="Code">&#160;&#160;&#160;XSIZE = ctscanSize[0], YSIZE = ctscanSize[1]</p>
                <p class="Code">TV, ctscanImage</p>
                <p>As shown in the following figure, the B-W LINEAR color table does not distinguish all of the aspects of this image. The XPALETTE utility can be used to change the color table.</p>
                <p>
                    <img src="../../Resources/Images/imgcolor10.gif" />
                </p>
            </li>
            <li value="7">
                <p>Open the XPALETTE utility:</p>
                <p class="Code">XPALETTE</p>
                <p>Select the <b>Predefined</b> button in the XPALETTE utility to change the color table to Rainbow + white.</p>
                <p>Click on the <b>Done</b> button after you select the Rainbow + white color table in XLOADCT and then click on the <b>Done</b> button in XPALETTE.</p>
                <p>The following figure shows the resulting XPALETTE and XLOADCT displays.<img src="../../Resources/Images/imgcolor11.gif" /></p>
            </li>
            <li value="8">
                <p>Now redisplay the image to show it with the Rainbow + white color table:</p>
                <p class="Code">TV, ctscanImage</p>
                <p>Your display should be similar to the following figure.</p>
                <p>
                    <img src="../../Resources/Images/imgcolor12.gif" />
                </p>
                <p>You can use XPALETTE to change a single color within the current color table. For example, you can change the color at index number 115 to orange.</p>
            </li>
            <li value="9">
                <p>Open XPALETTE and click on the 115th index (in column 3 and row 7):</p>
                <p class="Code_Indented">XPALETTE</p>
                <p>Change its color to orange by moving the <b>Red</b>, <b>Green</b>, and <b>Blue</b> sliders to 255, 128, and 0, respectively.</p>
                <p>
                    <img src="../../Resources/Images/imgcolor13.gif" />
                </p>
                <p>Click the <b>Done</b> button.</p>
                <p>Use TV to redisplay the image to include the last changes made in the XPALETTE utility:</p>
                <p class="Code_Indented">TV, ctscanImage</p>
                <p>The orange values now highlight some areas of the spine, kidney, and bones.</p>
                <p>You can highlight the bones even further by interpolating a new range in between the orange and white indices.</p>
            </li>
            <li value="10">
                <p>Open XPALETTE:</p>
                <p>Click on the 115th index and select the <b>Set Mark</b> button.</p>
                <p>Click on the highest index (which is usually 255 but it could be less) and then select the <b>Interpolate</b> button.</p>
                <p>To see the result of this interpolation within XPALETTE, click on the <b>Redraw</b> button.</p>
                <p>Click <b>Done</b> and redisplay the image:</p>
                <p class="Code">TV, ctscanImage</p>
                <p>The following figure displays the image using the modified color table.</p>
                <p>
                    <img src="../../Resources/Images/imgcolor14_bones.gif.gif" />
                </p>
                <p>
                    <img src="../../Resources/Images/imgcolor14.gif" />
                </p>
            </li>
        </ol>
        <h2 class="API"><a name="dg_routines_3604229493_917452"></a><a name="dg_routines_3604229493_761973_PageTOC_XPALETTE_"></a>Version History</h2>
        <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>Pre-4.0</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="dg_routines_3604229493_917460"></a><a name="dg_routines_3604229493_991459_PageTOC_XPALETTE_"></a>See Also</h2>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>