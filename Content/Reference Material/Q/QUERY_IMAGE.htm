<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: Q">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>QUERY_IMAGE </title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/Description.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="Q_list.htm">Routines: Q</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">QUERY_IMAGE</span>
        </div>
        <h1 class="Routine"><a name="Q_815714925_1095965"></a><a name="kanchor2142"></a><a name="Q_815714925_57422"></a>QUERY_IMAGE </h1>
        <p>The QUERY_IMAGE function determines whether a file is recognized as a supported image file. QUERY_IMAGE first checks the filename suffix, and if found, calls the corresponding QUERY_ routine. For example, if the specified file is image.bmp, QUERY_BMP is called to determine if the file is a valid .bmp file. If the file does not contain a filename suffix, or if the query fails on the specified filename suffix, QUERY_IMAGE checks against all supported file types. </p>
        <h2 class="API"><a name="Q_815714925_1070058"></a><a name="Q_815714925_1070058_PageTOC_QUERY_IMAGE_"></a>Syntax</h2>
        <p class="Syntax"><i>Result</i> = QUERY_IMAGE( <i>Filename [,&#160;Info] </i>[,&#160;<a href="#Q_815714925_1070109" class="selected">CHANNELS</a>=<i>variable</i>] [,&#160;<a href="#Q_815714925_1070111" class="selected">DIMENSIONS</a>=<i>variable</i>] [,&#160;<a href="#Q_815714925_1070113" class="selected">HAS_PALETTE</a>=<i>variable</i>] [,&#160;<a href="#Q_815714925_1070115" class="selected">IMAGE_INDEX</a>=<i>index</i>] [,&#160;<a href="#Q_815714925_1108577" class="selected">NUM_IMAGES</a>=<i>variable</i>] [,&#160;<a href="#Q_815714925_1108581" class="selected">PIXEL_TYPE</a>=<i>variable</i>] [,&#160;<a href="#Q_815714925_1070131" class="selected">SUPPORTED_READ</a>=<i>variable</i>] [,&#160;<a href="#Q_815714925_1070133" class="selected">SUPPORTED_WRITE</a>=<i>variable</i>] [,&#160;<a href="#Q_815714925_1104573" class="selected">TYPE</a>=<i>variable</i>]&#160;)</p>
        <h2 class="API"><a name="Q_815714925_1070060"></a><a name="Q_815714925_1070060_PageTOC_QUERY_IMAGE_"></a>Return Value</h2>
        <p>Result is a long with the value of 1 if the query was successful (the file was recognized as an image file) or 0 on failure. The return status will indicate failure for files that contain formats that are not supported by the corresponding READ_* routine, even though the file may be valid outside the IDL environment.</p>
        <p>If the file is a supported image file, an optional structure containing information about the image is returned. If the file is not a supported image file, QUERY_IMAGE returns 0.</p>
        <h2 class="API"><a name="Q_815714925_1070062"></a><a name="Q_815714925_1070062_PageTOC_QUERY_IMAGE_"></a>Arguments</h2>
        <h3 class="Argument">Filename</h3>
        <p>A required scalar string containing the name of the file to query.</p>
        <h3 class="Argument">Info</h3>
        <p>An optional anonymous structure containing information about the image. This structure is valid only when the return value of the function is 1. The Info structure for all image types has the following fields:</p>
        <table style="mc-table-style: url('../../Resources/TableStyles/Description.css');" cellspacing="0" class="TableStyle_Description">
            <col />
            <col />
            <thead>
                <tr>
                    <td class="TableStyle_Description_Head_0_0_RowSep_ColSep">
                        <p>Tag</p>
                    </td>
                    <td class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
                        <p>Type</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
                        <p>CHANNELS</p>
                    </td>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
                        <p>Long</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
                        <p>DIMENSIONS</p>
                    </td>
                    <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
                        <p>Two-dimensional long array</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
                        <p>HAS_PALETTE</p>
                    </td>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
                        <p>Integer</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
                        <p>IMAGE_INDEX</p>
                    </td>
                    <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
                        <p>Long</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
                        <p>NUM_IMAGES</p>
                    </td>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
                        <p>Long</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Description_Body_1_0_RowSep_ColSep">
                        <p>PIXEL_TYPE</p>
                    </td>
                    <td class="TableStyle_Description_Body_1_0_RowSep_ColEnd">
                        <p>Integer</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Description_Body_0_0_RowEnd_ColSep">
                        <p>TYPE</p>
                    </td>
                    <td class="TableStyle_Description_Body_0_0_RowEnd_ColEnd">
                        <p>Scalar string</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="Q_815714925_1070108"></a><a name="Q_815714925_1070108_PageTOC_QUERY_IMAGE_"></a>Keywords</h2>
        <h3 class="Keyword"><a name="Q_815714925_1070109"></a><a name="Q_815714925_1070109_Keywords_QUERY_IMAGE__"></a>CHANNELS</h3>
        <p>Set this keyword to a named variable to retrieve the number of channels in the image.</p>
        <h3 class="Keyword"><a name="Q_815714925_1070111"></a><a name="Q_815714925_1070111_Keywords_QUERY_IMAGE__"></a>DIMENSIONS</h3>
        <p>Set this keyword to a named variable to retrieve the image dimensions as a two-element array.</p>
        <h3 class="Keyword"><a name="Q_815714925_1070113"></a><a name="Q_815714925_1070113_Keywords_QUERY_IMAGE__"></a>HAS_PALETTE</h3>
        <p>Set this keyword to a named variable to equal to 1 if a palette is present, else 0.</p>
        <h3 class="Keyword"><a name="Q_815714925_1070115"></a><a name="Q_815714925_1070115_Keywords_QUERY_IMAGE__"></a>IMAGE_INDEX</h3>
        <p>Set this keyword to the index of the image to query from the file. The default is 0, the first image.</p>
        <h3 class="Keyword"><a name="Q_815714925_1108577"></a><a name="Q_815714925_1070117_Keywords_QUERY_IMAGE__"></a>NUM_IMAGES</h3>
        <p>Set this keyword to a named variable to retrieve the number of images in the file.</p>
        <h3 class="Keyword"><a name="Q_815714925_1108581"></a><a name="Q_815714925_1070119_Keywords_QUERY_IMAGE__"></a>PIXEL_TYPE<a name="kanchor2143"></a></h3>
        <p>Set this keyword to a named variable to retrieve the IDL Type Code of the image pixel format. See <a href="../S/SIZE.htm#S_820040301_1082572">IDL Type Codes and Names</a> for a complete list.</p>
        <p>The valid types for PIXEL_TYPE are:</p>
        <ul>
            <li value="1">1 = Byte</li>
            <li value="2">2 = Integer</li>
            <li value="3">3 = Longword Integer</li>
            <li value="4">4 = Floating Point</li>
            <li value="5">5 = Double-precision Floating Point</li>
            <li value="6">12 = Unsigned Integer</li>
            <li value="7">13 = Unsigned Longword Integer</li>
            <li value="8">14 = 64-bit Integer</li>
            <li value="9">15 = Unsigned 64-bit Integer</li>
        </ul>
        <h3 class="Keyword"><a name="Q_815714925_1070131"></a><a name="Q_815714925_1070131_Keywords_QUERY_IMAGE__"></a>SUPPORTED_READ</h3>
        <p>Set this keyword to a named variable to retrieve a string array of image types recognized by READ_IMAGE. If the SUPPORTED_READ keyword is used the filename and info arguments are optional.</p>
        <h3 class="Keyword"><a name="Q_815714925_1070133"></a><a name="Q_815714925_1070133_Keywords_QUERY_IMAGE__"></a>SUPPORTED_WRITE</h3>
        <p>Set this keyword to a named variable to retrieve a string array of image types recognized by WRITE_IMAGE. If the SUPPORTED_WRITE keyword is used the filename and info arguments are optional.</p>
        <h3 class="Keyword"><a name="Q_815714925_1104573"></a><a name="Q_815714925_1070135_Keywords_QUERY_IMAGE__"></a>TYPE</h3>
        <p>Set this keyword to a named variable that will contain the image type as a scalar string. Possible return values are BMP, GIF, JPEG, JPEG2000, PNG, PPM, SRF, TIFF, or DICOM.</p>
        <h2 class="API"><a name="Q_815714925_1112174"></a><a name="Q_815714925_14951"></a>Examples</h2>
        <p>The following example uses QUERY_IMAGE to determine whether or not an image has an associated palette.</p>
        <h3><a name="Q_815714925_82545"></a>Displaying<a name="kanchor2144"></a> Indexed Images with <a name="kanchor2145"></a>Direct Graphics</h3>
        <p>An indexed<a name="kanchor2146"></a> image contains up to 256 colors, typically defined by a color table associated with the image. The value of each pixel relates to a color within the associated color table. Combinations of the primary colors (red, green, and blue) make up the colors within the color table. Most indexed images are stored as byte and therefore do not require scaling prior to display. </p>
        <p>The following example imports an indexed image from the <code>avhrr.png</code> image file. This indexed image is a satellite photograph of the world. Complete the following steps for a detailed description of the process. </p>See <code>displayindexedimage_direct.<a name="kanchor2147"></a>pro </code>in the <code>examples/doc/image</code> subdirectory of the IDL installation directory for code that duplicates this example. Run the example procedure by entering <code>displayindexedimage_direct</code> at the IDL command prompt or view the file in an IDL Editor window by entering <code>.EDIT displayindexedimage_direct.pro</code>. The BLOCK keyword is set when using the XLOADCT utility to force the example routine to wait until the <b>Done</b> button is pressed to continue.<ol><li value="1"><p>Determine the path to the <code>avhrr.png</code> file, then use QUERY_IMAGE to determine the image parameters and inspect the results:</p><p class="Code">file = FILEPATH('avhrr.png', $<br />&#160;&#160;&#160;SUBDIRECTORY = ['examples', 'data'])<br />queryStatus = QUERY_IMAGE(file, imageInfo)<br />PRINT, 'Query Status = ', queryStatus<br />HELP, imageInfo, /STRUCTURE</p><p>The following text appears in the Output Log:</p><p class="Code">Query Status =            1</p><p class="Code">** Structure &lt;141d0b0&gt;, 7 tags, length=36, refs=1:</p><p class="Code">   CHANNELS &#160;&#160;&#160;&#160;&#160;LONG &#160;&#160;&#160;&#160;1</p><p class="Code">   DIMENSIONS &#160;&#160;&#160;LONG &#160;&#160;&#160;&#160;Array[2]</p><p class="Code">   HAS_PALETTE &#160;&#160;INT &#160;&#160;&#160;&#160;&#160;1</p><p class="Code">   IMAGE_INDEX &#160;&#160;LONG &#160;&#160;&#160;&#160;0</p><p class="Code">   NUM_IMAGES &#160;&#160;&#160;LONG &#160;&#160;&#160;&#160;1</p><p class="Code">   PIXEL_TYPE &#160;&#160;&#160;INT &#160;&#160;&#160;&#160;&#160;1</p><p class="Code">   TYPE &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;STRING &#160;&#160;'PNG'</p></li><li value="2"><p>Set the image size parameter from the query information:</p><p class="Code">imageSize = imageInfo.dimensions</p><p>The HAS_PALETTE tag has a value of 1. Thus, the image has a palette (color table), which is also contained within the file. The color table is made up of its three primary components (the red component, the green component, and the blue component).</p></li><li value="3"><p>Use <a href="../R/READ_IMAGE.htm#R_822202989_1071039">READ_IMAGE</a> to import the image and its associated color table from the file:</p><p class="Code">image = READ_IMAGE(file, red, green, blue)</p></li><li value="4"><p>If you are running IDL on a TrueColor display, set the DECOMPOSED keyword to the DEVICE command to zero before your first color table related routine is used within an IDL session or program. Load the red, green, and blue components of the image’s associated color table, then create a window and display the original image with the TV procedure:</p><p class="Code">DEVICE, DECOMPOSED = 0<br />TVLCT, red, green, blue<br />WINDOW, 0, XSIZE = imageSize[0], YSIZE = imageSize[1], $<br />&#160;&#160;&#160;TITLE = 'An Indexed Image'<br />TV, image</p></li><li value="5"><p>Use the XLOADCT utility to display the associated color table:</p><p class="Code">XLOADCT</p><p>Click on the <b>Done</b> button of XLOADCT to exit out of the utility.</p><p>The following figure shows the resulting indexed image and its color table.</p><p><img src="../../images/imgdisp03.gif" /></p><p>The data values within the image are indexed to specific colors within the table. You can change the color table associated with this image to show how an indexed image is dependent upon its related color table.</p></li><li value="6"><p>Change the current color table to the EOS B pre-defined color table and redisplay the image to show the color table change:</p><p class="Code">LOADCT, 27<br />TV, image</p><p class="NoteIndented">This step is not always necessary to redisplay the image. On PseudoColor (8-bit) or DirectColor systems, the display will update automatically when the current color table is changed.</p><ol><li value="1"><p>Use the XLOADCT utility to display the current color table:</p></li></ol><p class="Code">XLOADCT</p><p>Click on the <b>Done</b> button of XLOADCT to exit out of the utility.</p><p>The following figure shows the indexed image with the EOS B color table.</p><p><img src="../../images/imgdisp04.gif" /></p></li></ol><h2 class="API"><a name="Q_815714925_1076478"></a><a name="Q_815714925_1076478_PageTOC_QUERY_IMAGE_"></a>Version History</h2><table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable"><col /><col /><tbody><tr><td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep"><p>5.3</p></td><td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd"><p>Introduced</p></td></tr></tbody></table><div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div></body>
</html>