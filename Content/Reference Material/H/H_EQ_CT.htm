<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: H">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>H_EQ_CT </title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="H_list.htm">Routines: H</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">H_EQ_CT</span>
        </div>
        <h1 class="Routine"><a name="H_835179117_931377"></a><a name="H_835179117_52883"></a>H_EQ_CT </h1>
        <p><a name="kanchor1095"></a><a name="kanchor1096"></a>The H_EQ_CT procedure histogram-equalizes the color tables for an image or a region of the display. A pixel-distribution histogram is obtained, the cumulative integral is taken and scaled, and the result is applied to the current color table. </p>
        <p><a name="kanchor1097"></a><a name="kanchor1098"></a>Histogram equalization is used to change either an image or its associated color table to display minor variations within nearly uniform areas of the image. The histogram of the image is used to determine where the image or color table should be equalized to highlight these minor variations. See “Working with Histograms” (Chapter 8, <i>Image Processing in IDL</i>) in the <code>help/pdf</code> directory of the IDL installation directory for more information on histogram equalization with Object Graphics.</p>
        <p>This routine is written in the IDL language. Its source code can be found in the file <code>h_eq_ct.pro</code> in the <code>lib</code> subdirectory of the IDL distribution.</p>
        <h2 class="API"><a name="H_835179117_759193"></a><a name="H_835179117_759193_PageTOC_H_EQ_CT_"></a>Syntax</h2>
        <p class="Syntax">H_EQ_CT [,&#160;<i>Image</i>]</p>
        <h2 class="API"><a name="H_835179117_759195"></a><a name="H_835179117_759195_PageTOC_H_EQ_CT_"></a>Arguments</h2>
        <h3 class="Argument">Image</h3>
        <p>A two-dimensional byte array representing the image whose histogram is to be used in determining the new color tables. If this value is omitted, the user is prompted to mark the diagonal corners of a region of the display. If <i>Image</i> is specified, it is assumed that the image is loaded into the current IDL window. <i>Image</i> must be scaled the same way as the image loaded to the display. </p>
        <h2 class="API"><a name="H_835179117_883503"></a><a name="H_835179117_40970"></a>Keywords</h2>
        <p>None.</p>
        <h2 class="API"><a name="H_835179117_924455"></a><a name="H_835179117_91606"></a>Example</h2>
        <p><a name="kanchor1099"></a>The following example will apply histogram equalization to a color table associated with an image of mineral deposits to reveal previously indistinguishable features. This histogram equalization example is in Direct Graphics, which uses routines that directly work with the current color table. Since the concept of a current color table does not apply to Object Graphics, you must use histogram equalization routines that directly effect the image. See “Working with Histograms” (Chapter 8, <i>Image Processing in IDL</i>) in the <code>help/pdf</code> directory of the IDL installation directory for more information on histogram equalization with Object Graphics. Complete the following steps for a detailed description of the process. </p>
        <p class="ExampleCode">See <code>histogramequalizing_direct.<a name="kanchor1100"></a>pro</code> in the <code>examples/doc/image</code> subdirectory of the IDL installation directory for code that duplicates this example. Run the example procedure by entering <code>hailstorm</code> at the IDL command prompt or view the file in an IDL Editor window by entering <code>.EDIT histogramequalizing_direct.pro</code>. Note that the BLOCK keyword is set when using XLOADCT to force the example routine to wait until the <b>Done</b> button is pressed to continue. If the BLOCK keyword was not set, the example routine would produce all of the displays at once and then end.</p>
        <ol>
            <li value="1">
                <p>Determine the path to the <code>mineral.png </code>file:</p>
                <p class="Code">file = FILEPATH('mineral.png', $<br />&#160;&#160;&#160;SUBDIRECTORY = ['examples', 'data'])</p>
            </li>
            <li value="2">
                <p>Import the image from the <code>mineral.png </code>file into IDL:</p>
                <p class="Code">image = READ_PNG(file)</p>
            </li>
            <li value="3">
                <p>Determine the size of the imported image:</p>
                <p class="Code">imageSize = SIZE(image, /DIMENSIONS)</p>
            </li>
            <li value="4">
                <p>If you are running IDL on a TrueColor display, set the DECOMPOSED keyword to the DEVICE command to zero before your first color table related routine is used within an IDL session or program:</p>
                <p class="Code">DEVICE, DECOMPOSED = 0</p>
            </li>
            <li value="5">
                <p>Initialize the image display:</p>
                <p class="Code">LOADCT, 0<br />WINDOW, 0, XSIZE = 2*imageSize[0], YSIZE = imageSize[1], $<br />&#160;&#160;&#160;TITLE = 'Histogram/Image'</p>
            </li>
            <li value="6">
                <p>Compute and display the histogram of the image. This step is not required to perform histogram equalization on a color table within IDL. It is done here to show how the histogram equalization affects the color table:</p>
                <p class="Code">brightnessHistogram = BYTSCL(HISTOGRAM(image))<br />PLOT, brightnessHistogram, XSTYLE = 9, YSTYLE = 5, $<br />POSITION = [0.05, 0.2, 0.45, 0.9], $<br />XTITLE = 'Histogram of Image'</p>
            </li>
            <li value="7">
                <p>Display the image within the same window.</p>
                <p class="Code">TV, image, 1</p>
                <p>The following figure shows the resulting histogram (left) and its related image in Direct Graphics.</p>
                <p>
                    <img src="../../images/imgcolor25.gif" />
                </p>
            </li>
            <li value="8">
                <p>Use the H_EQ_CT procedure to perform histogram equalization on the current color table:</p>
                <p class="Code">H_EQ_CT, image</p>
            </li>
            <li value="9">
                <p>Display the original image in another window with the updated color table:</p>
                <p class="Code">WINDOW, 1, XSIZE = imageSize[0], YSIZE = imageSize[1], $<br />TITLE = 'Histogram Equalized Color Table'<br />TV, image</p>
                <p>Display the updated color table with the XLOADCT utility:</p>
                <p class="Code">XLOADCT</p>
                <p>Click on the <b>Done</b> button close the XLOADCT utility.</p>
                <p>The following figure contains the results of the equalization on the image (left) and its color table in Direct Graphics. After introducing intensity gradients within previously uniform regions of the image, the cracks are now more visible. However, some of the original features are not as clear. These regions can be clarified by interactively applying the amount of equalization to the color table.</p>
                <p>
                    <img src="../../images/imgcolor26.gif" />
                </p>
                <p>The histogram equalizing process can also be interactively applied to a color table with the H_EQ_INT procedure. The H_EQ_INT procedure provides an interactive display, allowing you to use the cursor to control the amount of equalization. The equalization applied to the color table is scaled by a fraction, which is controlled by the movement of the cursor in the x-direction. If the cursor is all the way to the left side of the interactive display, the fraction equalized is close to zero, and the equalization has little effect on the color table. If the cursor is all the way to the right side of the interactive display, the fraction equalized is close to one, and the equalization is fully applied to the color table (which is similar to the results from the H_EQ_CT procedure). You can click on the right mouse button to set the amount of equalization and exit out of the interactive display.</p>
            </li>
            <li value="10">
                <p>Use the H_EQ_INT procedure to interactively perform histogram equalization on the current color table:</p>
                <p class="Code">H_EQ_INT, image</p>
                <p>Place the cursor at about 130 in the x-direction, which is about 0.5 equalized (about 50% of the equalization applied by the H_EQ_CT procedure). You do not have to be exact for this example. The y-direction location is arbitrary.</p>
                <p>Click on the right mouse button.</p>
                <p>The interactive display is similar to the following figure.</p>
                <p>
                    <img src="../../images/imgcolor27.gif" />
                </p>
            </li>
            <li value="11">
                <p>Display the image using the updated color table in another window:</p>
                <p class="Code">WINDOW, 2, XSIZE = imageSize[0], YSIZE = imageSize[1], $<br />TITLE = 'Interactively Equalized Color Table'<br />TV, image</p>
                <p>Display the updated color table with the XLOADCT utility:</p>
                <p class="Code">XLOADCT</p>
                <p>Click on the <b>Done</b> button close the XLOADCT utility.</p>
                <p>The following figure contains the results of the equalization on the image (left) and its color table in Direct Graphics. The original details have returned and the cracks are still visible.</p>
                <p>
                    <img src="../../images/imgcolor28.gif" />
                </p>
            </li>
        </ol>
        <h2 class="API"><a name="H_835179117_759198"></a><a name="H_835179117_759198_PageTOC_H_EQ_CT_"></a>Version History</h2>
        <table style="mc-table-style: url('../../Resources/TableStyles/VersionTable.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>Pre 4.0</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="H_835179117_880129"></a><a name="H_835179117_880129_PageTOC_H_EQ_CT_"></a>See Also</h2>
        <p><a href="H_EQ_INT.htm#H_835179117_759200">H_EQ_INT</a>
        </p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>