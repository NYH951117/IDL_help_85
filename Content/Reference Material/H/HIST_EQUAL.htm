<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: H">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>HIST_EQUAL </title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="H_list.htm">Routines: H</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">HIST_EQUAL</span>
        </div>
        <h1 class="Routine"><a name="H_835179117_758147"></a><a name="kanchor1488"></a><a name="H_835179117_23334"></a>HIST_EQUAL </h1>
        <p><a name="kanchor1489"></a>The HIST_EQUAL function returns a histogram-equalized byte array. </p>
        <p>The HISTOGRAM function is used to obtain the density distribution of the input array. The histogram is integrated to obtain the cumulative density-probability function and finally the lookup function is used to transform to the output image. When used in image processing, HIST_EQUAL is often used to enhance contrast within an image (<a href="#Addition" class="selected">see Additional Examples</a>). <a name="kanchor1490"></a></p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>The first element of the histogram is always zeroed to remove the background.</p>
        <p>This routine is written in the IDL language. Its source code can be found in the file <code>hist_equal.pro</code> in the <code>lib</code> subdirectory of the IDL distribution.</p>
        <h2 class="API"><a name="H_835179117_758171"></a><a name="H_835179117_758171_PageTOC_HIST_EQUAL_"></a>Example</h2>
        <p>Create a sample image using the DIST function and display it:</p>
        <p class="Code">myImage = DIST(100)</p>
        <p class="Code">TV, myImage</p>
        <p>Create a histogram-equalized version of the byte array, <code>image</code>, and display the new version. Use a minimum input value of 10, a maximum input value of 200, and limit the top value of the output array to 220:</p>
        <p class="Code">newImage = HIST_EQUAL(myImage, MINV=10, MAXV=200, TOP=220)</p>
        <p class="Code">TV, newImage</p>
        <p>For a more detailed example of using HIST_EQUAL to enhance an image, <a href="#Addition" class="selected">see Additional Examples</a> at the bottom of this topic.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>See “Working with Histograms” (Chapter 8, <i>Image Processing in IDL</i>) in the <code>help/pdf</code> directory of the IDL installation.</p>
        <h2 class="API"><a name="H_835179117_758153"></a><a name="H_835179117_758153_PageTOC_HIST_EQUAL_"></a>Syntax</h2>
        <p class="Syntax"><i>Result</i> = HIST_EQUAL( <i>A</i> [,&#160;<a href="#H_835179117_871698" class="selected">BINSIZE</a>=<i>value</i>] [,&#160;<a href="#H_835179117_876498" class="selected">FCN</a>=<i>vector</i>] [,&#160;/<a href="#H_835179117_874403" class="selected">HISTOGRAM_ONLY</a>] [,&#160;<a href="#H_835179117_874687" class="selected">MAXV</a>=<i>value</i>] [,&#160;<a href="#H_835179117_758160" class="selected">MINV</a>=<i>value</i>] [,&#160;<a href="#H_835179117_875087" class="selected">OMAX</a>=<i>variable</i>] [,&#160;<a href="#H_835179117_875100" class="selected">OMIN</a>=<i>variable</i>] [,&#160;<a href="#H_835179117_874600" class="selected">PERCENT</a>=<i>value</i>] [,&#160;<a href="#H_835179117_874602" class="selected">TOP</a>=<i>value</i>] )</p>
        <h2 class="API"><a name="H_835179117_758155"></a><a name="H_835179117_758155_PageTOC_HIST_EQUAL_"></a>Return Value</h2>
        <p>This function returns a histogram-equalized array of type byte, with the same dimensions as the input array. If the HISTOGRAM_ONLY keyword is set, then the output will be a vector of type LONG.</p>
        <h2 class="API"><a name="H_835179117_874797"></a><a name="H_835179117_874797_PageTOC_HIST_EQUAL_"></a>Arguments</h2>
        <h3 class="Argument">A</h3>
        <p>The array to be histogram-equalized.</p>
        <h2 class="API"><a name="H_835179117_758158"></a><a name="H_835179117_758158_PageTOC_HIST_EQUAL_"></a>Keywords</h2>
        <h3 class="Keyword"><a name="H_835179117_871698"></a><a name="H_835179117_871698_Keywords_HIST_EQUAL__"></a>BINSIZE</h3>
        <p>Set this keyword to the size of the bin to use. The default is BINSIZE=1 if <i>A</i> is a byte array, or, for other input types, the default is (MAXV&#160;–&#160;MINV)/5000.</p>
        <h3 class="Keyword"><a name="H_835179117_876498"></a><a name="H_835179117_876498_Keywords_HIST_EQUAL__"></a>FCN</h3>
        <p>Set this keyword to the desired cumulative probability distribution function in the form of a 256-element vector. If a probability distribution function is not supplied, IDL uses a linear ramp, which yields equal probability bin results. This function is later normalized, so magnitude is inconsequential; the function should, however, increase monotonically.</p>
        <h3 class="Keyword"><a name="H_835179117_874403"></a><a name="H_835179117_874403_Keywords_HIST_EQUAL__"></a>HISTOGRAM_ONLY</h3>
        <p>Set this keyword to return a vector of type LONG containing the cumulative distribution histogram, rather than the histogram equalized array.</p>
        <h3 class="Keyword"><a name="H_835179117_874687"></a><a name="H_835179117_874687_Keywords_HIST_EQUAL__"></a>MAXV</h3>
        <p>Set this keyword to the maximum value to consider. The default is 255 if <i>A</i> is a byte array, otherwise the maximum data value is used. Input elements greater than or equal to MAXV are output as 255.</p>
        <h3 class="Keyword"><a name="H_835179117_758160"></a><a name="H_835179117_758160_Keywords_HIST_EQUAL__"></a>MINV</h3>
        <p>Set this keyword to the minimum value to consider. The default is 0 if <i>A</i> is a byte array, otherwise the minimum data value is used. Input elements less than or equal to MINV are output as 0.</p>
        <h3 class="Keyword"><a name="H_835179117_875087"></a><a name="H_835179117_875087_Keywords_HIST_EQUAL__"></a>OMAX</h3>
        <p>Set this keyword to a named variable that, upon exit, will contain the maximum data value used in constructing the histogram.</p>
        <h3 class="Keyword"><a name="H_835179117_875100"></a><a name="H_835179117_875100_Keywords_HIST_EQUAL__"></a>OMIN</h3>
        <p>Set this keyword to a named variable that, upon exit, will contain the minimum data value used in constructing the histogram.</p>
        <h3 class="Keyword"><a name="H_835179117_874600"></a><a name="H_835179117_874600_Keywords_HIST_EQUAL__"></a>PERCENT</h3>
        <p>Set this keyword to a value between 0 and 100 to stretch the image histogram. The histogram will be stretched linearly between the limits that exclude the PERCENT fraction of the lowest values, and the PERCENT fraction of the highest values. This is an automatic, semi-robust method of contrast enhancement.</p>
        <h3 class="Keyword"><a name="H_835179117_874602"></a><a name="H_835179117_874602_Keywords_HIST_EQUAL__"></a>TOP</h3>
        <p>The maximum value of the scaled result. If TOP is not specified, 255 is used. Note that the minimum value of the scaled result is always 0.</p>
        <h2 class="API"><a name="Addition"></a>Additional Examples</h2>
        <p>This example shows the use of the HIST_EQUAL function to enhance the contrast in an image. Copy and paste the following lines to the IDL command line to run them:</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Read image data from a file.</p>
        <p class="Code">file = FILEPATH('convec.dat', SUBDIR=['examples','data'])</p>
        <p class="Code">mantle = READ_BINARY(file, DATA_DIMS=[248,248])</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Display the image.</p>
        <p class="Code">orig = IMAGE(mantle, $</p>
        <p class="Code">&#160;&#160;&#160;LAYOUT=[2,2,1], $</p>
        <p class="Code">&#160;&#160;&#160;TITLE='Original Image', $</p>
        <p class="Code">&#160;&#160;&#160;WINDOW_TITLE='Histogram Equalization Example')</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Calculate and display the image's histogram.</p>
        <p class="Code">orig_histogram = HISTOGRAM(mantle)</p>
        <p class="Code">hist = PLOT(orig_histogram, $</p>
        <p class="Code">&#160;&#160;&#160;LAYOUT=[2,2,2], $</p>
        <p class="Code">&#160;&#160;&#160;/CURRENT, $</p>
        <p class="Code">&#160;&#160;&#160;COLOR='red', $</p>
        <p class="Code">&#160;&#160;&#160;MAX_VALUE=5e3, $</p>
        <p class="Code">&#160;&#160;&#160;XTITLE='Pixel value', $</p>
        <p class="Code">&#160;&#160;&#160;YTITLE='Frequency', $</p>
        <p class="Code">&#160;&#160;&#160;TITLE='Histogram')</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Perform histogram equalization on the image </p>
        <p class="Code">; with the HIST_EQUAL function.</p>
        <p class="Code">; Display the result.</p>
        <p class="Code">equ_mantle = HIST_EQUAL(mantle)</p>
        <p class="Code">equ = IMAGE(equ_mantle, $</p>
        <p class="Code">&#160;&#160;&#160;LAYOUT=[2,2,3], $</p>
        <p class="Code">&#160;&#160;&#160;/CURRENT, $</p>
        <p class="Code">&#160;&#160;&#160;TITLE='Equalized Image')</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Calculate and display the equalized image's histogram.</p>
        <p class="Code">equ_histogram = HISTOGRAM(equ_mantle)</p>
        <p class="Code">equ_hist = PLOT(equ_histogram, $</p>
        <p class="Code">&#160;&#160;&#160;LAYOUT=[2,2,4], $</p>
        <p class="Code">&#160;&#160;&#160;/CURRENT, $</p>
        <p class="Code">&#160;&#160;&#160;COLOR='blue', $</p>
        <p class="Code">&#160;&#160;&#160;MAX_VALUE=5e3, $</p>
        <p class="Code">&#160;&#160;&#160;XTITLE='Pixel value', $</p>
        <p class="Code">&#160;&#160;&#160;YTITLE='Frequency', $</p>
        <p class="Code">&#160;&#160;&#160;TITLE='Histogram')</p>
        <p>The resulting image before and after processing through histogram equalization. Note the increase in contrast in the second image, and the wider spread of pixel values in the second histogram (after equalization).</p>
        <p class="Code">&#160;</p>
        <p class="Code">
            <img src="../images/hist_eq_ex.png" />
        </p>
        <h2 class="API"><a name="H_835179117_758178"></a><a name="H_835179117_758178_PageTOC_HIST_EQUAL_"></a>Version History</h2>
        <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>Original</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="H_835179117_880174"></a><a name="H_835179117_880174_PageTOC_HIST_EQUAL_"></a>See Also</h2>
        <p><a href="../A/ADAPT_HIST_EQUAL.htm#A_850317933_985007">ADAPT_HIST_EQUAL</a>, <a href="H_EQ_CT.htm#H_835179117_931377">H_EQ_CT</a>, <a href="H_EQ_INT.htm#H_835179117_759200">H_EQ_INT</a>, <a href="HIST_2D.htm#H_835179117_758132">HIST_2D</a>, <a href="HISTOGRAM.htm#H_835179117_677165">HISTOGRAM</a></p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>