<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: M">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>MAP_PROJ_IMAGE</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="M_list.htm">Routines: M</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">MAP_PROJ_IMAGE</span>
        </div>
        <h1 class="Routine"><a name="M_824365677_1061294"></a><a name="kanchor1783"></a>MAP_PROJ_IMAGE</h1>
        <p>The MAP_PROJ_IMAGE function warps an image (or other 2-dimensional dataset) from geographic coordinates (longitude and latitude) to a specified map projection. </p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>Pass in the result from <a href="MAP_PROJ_INIT.htm#M_824365677_981059">MAP_PROJ_INIT</a> using this function’s <a href="#M_824365677_1062557" class="selected">MAP_STRUCTURE</a> keyword to set up the desired map projection.</p>
        <p>Optionally, the MAP_PROJ_IMAGE function can be used to warp an image in Cartesian (UV) coordinates from one map projection to another.</p>
        <h2 class="API"><a name="M_824365677_1062539"></a>Syntax</h2>
        <p class="Syntax"><i>Result</i> = MAP_PROJ_IMAGE(<i>Image</i> [,&#160;<i>Range</i>] [,&#160;/<a href="#M_824365677_1062551" class="selected">BILINEAR</a>] [,&#160;<a href="#M_824365677_1062553" class="selected">DIMENSIONS</a>=<i>vector</i>] [,&#160;<a href="#M_824365677_1062555" class="selected">IMAGE_STRUCTURE</a>=<i>structure</i>] [,&#160;<a href="#M_824365677_1062557" class="selected">MAP_STRUCTURE</a>=<i>structure</i>] [,&#160;<a href="#M_824365677_1062562" class="selected">MASK</a>=<i>variable</i>] [,&#160;<a href="#M_824365677_1062565" class="selected">MAX_VALUE</a>=<i>value</i>] [,&#160;<a href="#M_824365677_1062567" class="selected">MIN_VALUE</a>=<i>value</i>] [,&#160;<a href="#M_824365677_1062569" class="selected">MISSING</a>=<i>value</i>] [,&#160;<a href="#M_824365677_1062571" class="selected">UVRANGE</a>=<i>variable</i>] [,&#160;<a href="#M_824365677_1096402" class="selected">XINDEX</a>=<i>variable</i>] [,&#160;<a href="#M_824365677_1096407" class="selected">YINDEX</a>=<i>variable</i>] )</p>
        <h2 class="API"><a name="M_824365677_1062541"></a>Return Value</h2>
        <p>This routine returns a two-dimensional array containing the warped image. The returned array has the same type as the input image.</p>
        <h2 class="API"><a name="M_824365677_1062543"></a>Arguments</h2>
        <h3 class="Argument">Image</h3>
        <p>A two-dimensional array containing the image to warp.</p>
        <h3 class="Argument">Range</h3>
        <p>If you are warping <i>Image</i> from geographic coordinates to a map projection, <i>Range</i> is a four-element array specifying the longitude/latitude range (in degrees) of <i>Image. Range</i> has the format [<i>Lonmin</i>, <i>Latmin</i>, <i>Lonmax</i>, <i>Latmax</i>]. If <i>Range</i> is not supplied, the routine uses a default range of [-180, -90, 180, 90].</p>
        <p>If you are warping <i>Image</i> from one map projection to another (that is, if you provide a value for the IMAGE_STRUCTURE keyword), then <i>Range</i> is a four-element array specifying the Cartesian (UV) range. In this case, <i>Range</i> must be provided and has the format [<i>Umin</i>, <i>Vmin</i>, <i>Umax</i>, <i>Vmax</i>].</p>
        <p class="Tip" data-mc-autonum="&lt;b&gt;Tip: &lt;/b&gt;"><span class="autonumber"><span><b>Tip: </b></span></span>Use the UVRANGE keyword to retrieve the range in Cartesian (UV) coordinates of <i>Result</i>.</p>
        <h2 class="API"><a name="M_824365677_1062550"></a>Keywords</h2>
        <h3 class="Keyword"><a name="M_824365677_1062551"></a>BILINEAR</h3>
        <p>Set this keyword to use bilinear interpolation when warping <i>Image</i>. By default, the routine will use nearest neighbor sampling. Bilinear interpolation will produce smoother results but may be slower.</p>
        <h3 class="Keyword"><a name="M_824365677_1062553"></a>DIMENSIONS</h3>
        <p>Set this keyword equal to a two-element vector specifying the width and height of the desired <i>Result</i>, in pixels. If this keyword is not specified, then the <i>Result</i> has the same dimensions as the input <i>Image</i>.</p>
        <h3 class="Keyword"><a name="M_824365677_1062555"></a>IMAGE_STRUCTURE</h3>
        <p>If the input <i>Image</i> is already in a certain projection, set this keyword equal to the !MAP structure associated with the input image. If IMAGE_STRUCTURE is supplied, the <i>Range</i> argument <i>must</i> be provided. In this case, <i>Image</i> will be warped from the projection specified by IMAGE_STRUCTURE to the projection specified by MAP_STRUCTURE.</p>
        <h3 class="Keyword"><a name="M_824365677_1062557"></a>MAP_STRUCTURE</h3>
        <p>Set this keyword equal to a !MAP structure (as returned from the <a href="MAP_PROJ_INIT.htm#M_824365677_981059">MAP_PROJ_INIT</a> function) to be used instead of the default !MAP projection. If this keyword is not specified, the value of the !MAP system variable must have been previously set.</p>
        <h3 class="Keyword"><a name="M_824365677_1062562"></a>MASK</h3>
        <p>Set this keyword equal to a named variable that will contain a byte array of the same dimensions as the <i>Result</i>, containing a mask of the “good” values. Values in <i>Result</i> that were set to MISSING (that is, the values were either off the map or outside the range specified by the MIN_VALUE and MAX_VALUE keywords) will have a mask value of 0 (zero), while all other mask values will be 1 (one).</p>
        <p class="Tip" data-mc-autonum="&lt;b&gt;Tip: &lt;/b&gt;"><span class="autonumber"><span><b>Tip: </b></span></span>The MASK array allows you to distinguish values in the <i>Result</i> that were explicitly set to MISSING versus those that happen to have a value equal to the MISSING value.</p>
        <h3 class="Keyword"><a name="M_824365677_1062565"></a>MAX_VALUE</h3>
        <p>Set this keyword equal to an integer that represents the maximum value an element of the <i>Result</i> array should be allowed to have. Data points with values greater than or equal to this value will be treated as missing data, and will be set to the value specified by the MISSING keyword.</p>
        <h3 class="Keyword"><a name="M_824365677_1062567"></a>MIN_VALUE</h3>
        <p>Set this keyword equal to an integer that represents the minimum value an element of the <i>Result</i> array should be allowed to have. Data points with values less than or equal to this value will be treated as missing data, and will be set to the value specified by the MISSING keyword.</p>
        <h3 class="Keyword"><a name="M_824365677_1062569"></a>MISSING</h3>
        <p>Set this keyword equal to an integer value to be used for pixels that fall outside of the valid map coordinates or whose data values are outside of the range specified by the MIN_VALUE and MAX_VALUE keywords. The default value is 0.</p>
        <h3 class="Keyword"><a name="M_824365677_1062571"></a>UVRANGE</h3>
        <p>Set this keyword equal to a named variable that will contain the range of the UV coordinates of the <i>Result</i> in a four-element array of the form [<i>U&#160;min</i>, <i>V&#160;min</i>, <i>U&#160;max</i>, <i>V&#160;max</i>].</p>
        <h3 class="Keyword"><a name="M_824365677_1096402"></a>XINDEX</h3>
        <p>Set this keyword equal to a named variable that will contain the <i>x</i> index used to warp the image. Use this keyword (with <a href="#M_824365677_1096407" class="selected">YINDEX</a>) when warping multiple images (or image channels) that have the same dimensions and map projection. For the first call to MAP_PROJ_IMAGE, XINDEX and YINDEX should be set to named variables that are either undefined or contain scalar values. Upon return, XINDEX and YINDEX contain the indices that were used for warping the image. For subsequent images, the XINDEX and YINDEX variables should be passed in unmodified. In this case, IDL bypasses the map projection and uses the indices to warp the image.</p>
        <h3 class="Keyword"><a name="M_824365677_1096407"></a>YINDEX</h3>
        <p>Set this keyword equal to a named variable that will contain the <i>y</i> index used to warp the image. Use this keyword (with <a href="#M_824365677_1096402" class="selected">XINDEX</a>) when warping multiple images (or image channels) that have the same dimensions and map projection. For the first call to MAP_PROJ_IMAGE, XINDEX and YINDEX should be set to named variables that are either undefined or contain scalar values. Upon return, XINDEX and YINDEX contain the indices that were used for warping the image. For subsequent images, the XINDEX and YINDEX variables should be passed in unmodified. In this case, IDL bypasses the map projection and uses the indices to warp the image.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>If the XINDEX and YINDEX keywords are present, IDL ignores the <i>Range</i> argument and the <a href="#M_824365677_1062555" class="selected">IMAGE_STRUCTURE</a>, <a href="#M_824365677_1062557" class="selected">MAP_STRUCTURE</a>, and <a href="#M_824365677_1062571" class="selected">UVRANGE</a> keywords. If you specified the <a href="#M_824365677_1062551" class="selected">BILINEAR</a>, <a href="#M_824365677_1062553" class="selected">DIMENSIONS</a>, <a href="#M_824365677_1062565" class="selected">MAX_VALUE</a>, <a href="#M_824365677_1062567" class="selected">MIN_VALUE</a>, or <a href="#M_824365677_1062569" class="selected">MISSING</a> keywords on the first call to MAP_PROJ_IMAGE, you should supply the same keywords with the same values on subsequent calls.</p>
        <h2 class="API"><a name="M_824365677_1062573"></a>Example</h2>
        <p>The following example warps a global map from longitude/latitude (geographic) coordinates into the Interrupted Goode projection:</p>
        <p class="Code">; Load an image in longitude/latitude (geographic) coordinates<br />file = FILEPATH( 'avhrr.png', SUBDIRECTORY=['examples','data'] )<br />data = READ_PNG( file, r, g, b )<br /><br />; Resize the image data<br />red0 = REBIN( r[data], 360, 180 )<br />green0 = REBIN( g[data], 360, 180)<br />blue0 = REBIN( b[data], 360, 180 )<br /><br />iImage, RED=red0, GREEN=green0, BLUE=blue0, $<br />&#160;&#160;&#160;DIMENSIONS=[500,600], VIEW_GRID=[1,3]<br /><br />; First map projection<br />sMap = MAP_PROJ_INIT('Interrupted Goode')<br /><br />; Warp each channel to the map projection. For the first <br />; channel also compute the MASK and the UVRANGE.<br />; Use XINDEX and YINDEX to speed up green and blue channels.<br />red1 = MAP_PROJ_IMAGE( red0, MAP_STRUCTURE=sMap, MASK=mask, $ <br />&#160;&#160;&#160;UVRANGE=uvrange, XINDEX=xindex, YINDEX=yindex ) <br />green1 = MAP_PROJ_IMAGE( green0, XINDEX=xindex, YINDEX=yindex ) <br />blue1 = MAP_PROJ_IMAGE( blue0, XINDEX=xindex, YINDEX=yindex )<br /><br />IIMAGE, RED=red1, GREEN=green1, BLUE=blue1, ALPHA=mask*255b, $<br />&#160;&#160;&#160;/VIEW_NEXT</p>
        <p>Now warp the image from the Interrupted Goode projection to a new projection:</p>
        <p class="Code">; New map projection<br />mapStruct = MAP_PROJ_INIT( 'Mollweide', /GCTP )<br /><br />; Now use the IMAGE_STRUCTURE keyword to warp each channel <br />; from the Interrupted Goode projection to Mollweide. <br />; We also need to input the UVRANGE of the input image. <br />; Use XINDEX and YINDEX to speed up green and blue channels,<br />; but use a new variable since we already have xindex/yindex.<br />red2 = MAP_PROJ_IMAGE( red1, uvrange, IMAGE_STRUCTURE=sMap, $ <br />&#160;&#160;&#160;MAP_STRUCTURE=mapStruct, MASK=mask, $<br />&#160;&#160;&#160;XINDEX=xindex2, YINDEX=yindex2 ) <br />green2 = MAP_PROJ_IMAGE( green1, XINDEX=xindex2, YINDEX=yindex2 ) <br />blue2 = MAP_PROJ_IMAGE( blue1, XINDEX=xindex2, YINDEX=yindex2 ) <br /><br />IIMAGE, RED=red2, GREEN=green2, BLUE=blue2, ALPHA=mask*255b, $<br />&#160;&#160;&#160;/VIEW_NEXT</p>
        <p>The resulting iImage tool display is shown in the following figure.</p>
        <p>
            <img src="../../images/map_proj_image1.gif" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 10.8px;margin-bottom: 7.080471px;" />
        </p>
        <h2 class="API"><a name="M_824365677_1062626"></a>Version History</h2>
        <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_ColSep">
                        <p>6.1</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>6.2</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>XINDEX and YINDEX keywords added</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="M_824365677_1062628"></a>See Also</h2>
        <p><a href="../I/INDGEN.htm#I_833016429_677235">INDGEN</a>, <a href="MAP_PROJ_FORWARD.htm#M_824365677_1061414">MAP_PROJ_FORWARD</a>, <a href="MAP_PROJ_INIT.htm#M_824365677_981059">MAP_PROJ_INIT</a></p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>