<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: M">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>MESH_SMOOTH </title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/NoLines.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="M_list.htm">Routines: M</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">MESH_SMOOTH</span>
        </div>
        <h1 class="Routine"><a name="M_824365677_929954"></a><a name="kanchor1852"></a><a name="M_824365677_17023"></a>MESH_SMOOTH </h1>
        <p>The MESH_SMOOTH function performs spatial smoothing on a polygon mesh. This function smooths a mesh by applying Laplacian smoothing to each vertex, as described by the following formula: </p>
        <p>
            <img src="../../images/19_25.jpg" />
        </p>
        <table style="mc-table-style: url('../../Resources/TableStyles/NoLines.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0" class="TableStyle_NoLines">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_NoLines_Body_0_0_RowSep_ColSep">
                        <p>
                            <img src="../../images/19_12.jpg" />
                        </p>
                    </td>
                    <td class="TableStyle_NoLines_Body_0_0_RowSep_ColEnd">
                        <p>is vertex <i>i</i> for iteration <i>n</i></p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_NoLines_Body_0_0_RowSep_ColSep">
                        <p>λ
                        </p>
                    </td>
                    <td class="TableStyle_NoLines_Body_0_0_RowSep_ColEnd">
                        <p>is the smoothing factor</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_NoLines_Body_0_0_RowEnd_ColSep">
                        <p>M</p>
                    </td>
                    <td class="TableStyle_NoLines_Body_0_0_RowEnd_ColEnd">
                        <p>is the number of vertices that share a common edge with <i>x<sub>i</sub></i><i>n</i></p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="M_824365677_948523"></a><a name="M_824365677_948523_PageTOC_MESH_SMOOTH_"></a>Syntax</h2>
        <p class="Syntax"><i>Result</i> = MESH_SMOOTH (<i>Verts</i>, <i>Conn</i> [,&#160;<a href="#M_824365677_948533" class="selected">ITERATIONS</a>=<i>value</i>] [,&#160;<a href="#M_824365677_948535" class="selected">FIXED_VERTICES</a>=<i>array</i>] [,&#160;/<a href="#M_824365677_948537" class="selected">FIXED_EDGE_VERTICES</a>] [,&#160;<a href="#M_824365677_948539" class="selected">LAMBDA</a>=<i>value</i>])</p>
        <h2 class="API"><a name="M_824365677_948525"></a><a name="M_824365677_948525_PageTOC_MESH_SMOOTH_"></a>Return Value</h2>
        <p>The output of this function is resulting [3, <i>n</i>] array of modified vertices.</p>
        <h2 class="API"><a name="M_824365677_948527"></a><a name="M_824365677_948527_PageTOC_MESH_SMOOTH_"></a>Arguments</h2>
        <h3 class="Argument">Verts</h3>
        <p>Input array of polygonal vertices [3, <i>n</i>].</p>
        <h3 class="Argument">Conn</h3>
        <p>Input polygonal mesh connectivity array.</p>
        <h2 class="API"><a name="M_824365677_948532"></a><a name="M_824365677_948532_PageTOC_MESH_SMOOTH_"></a>Keywords</h2>
        <h3 class="Keyword"><a name="M_824365677_948533"></a><a name="M_824365677_948533_Keywords_MESH_SMOOTH__"></a>ITERATIONS</h3>
        <p>Number of iterations to smooth. The default value is 50.</p>
        <h3 class="Keyword"><a name="M_824365677_948535"></a><a name="M_824365677_948535_Keywords_MESH_SMOOTH__"></a>FIXED_VERTICES</h3>
        <p>Set this keyword to an array of vertex indices which are not to be modified by the smoothing.</p>
        <h3 class="Keyword"><a name="M_824365677_948537"></a><a name="M_824365677_948537_Keywords_MESH_SMOOTH__"></a>FIXED_EDGE_VERTICES</h3>
        <p>Set this keyword to specify that mesh outer edge vertices are not to be modified by the smoothing.</p>
        <h3 class="Keyword"><a name="M_824365677_948539"></a><a name="M_824365677_948539_Keywords_MESH_SMOOTH__"></a>LAMBDA</h3>
        <p>Smoothing factor. The default value is 0.05.</p>
        <h2 class="API"><a name="M_824365677_953363"></a><a name="M_824365677_953363_PageTOC_MESH_SMOOTH_"></a>Examples</h2>
        <p><a name="kanchor1853"></a><a name="kanchor1854"></a><a name="kanchor1855"></a>This example smooths a rectangular mesh containing a spike. First, we create a rectangular mesh made up 10 columns and 5 rows of vertices. The vertices are connected with right triangles. The mesh is placed in a polygon object, which is added to a model object. The model is displayed in the XOBJVIEW utility. The XOBJVEW utility allows you to click-and-drag the polygon object to rotate and translate it. See <a href="../X/XOBJVIEW.htm#X_800576109_956910">XOBJVIEW</a> for more information on this utility.</p>
        <p>When you quit out of the first XOBJVIEW display, the second XOBJVIEW display will appear. The center vertex of the top row is displaced in the y-direction. This displacement causes the center of the top to spike out away from the mesh. After you quit out of the second display, the third display shows the result of smoothing the entire mesh. The final display shows the results of smoothing the spike with all the other vertices fixed.</p>
        <p>The example is split into multiple segments; click on each segment to enter the code at the IDL command prompt.</p>
        <p class="Code">; Initialize mesh size parameters.<br />nX = 10<br />nY = 5<br /><br />; Initialize the x coordinates of the mesh's vertices.<br />xVertices = FINDGEN(nX) # REPLICATE(1., nY)<br />PRINT, 'xVertices:  '<br />PRINT, xVertices, FORMAT = '(10F6.1)'<br /><br />; Initialize the y coordinates of the mesh's vertices.<br />yVertices = REPLICATE(1., nX) # FINDGEN(nY)<br />PRINT, 'yVertices:  '<br />PRINT, yVertices, FORMAT = '(10F6.1)'<br /><br />; Derive the overall vertices of the mesh.<br />vertices = FLTARR(3, (nX*nY))<br />vertices[0, *] = xVertices<br />vertices[1, *] = yVertices<br />PRINT, 'vertices:  '<br />PRINT, vertices, FORMAT = '(3F6.1)'<br /><br />; Triangulate the mesh to establish connectivity.<br />TRIANGULATE, xVertices, yVertices, triangles<br />trianglesSize = SIZE(triangles, /DIMENSIONS)<br />polygons = LONARR(4, trianglesSize[1])<br />polygons[0, *] = 3<br />polygons[1, 0] = triangles<br />PRINT, 'polygons:  '<br />PRINT, polygons, FORMAT = '(4I6)'</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Derive connectivity from the resulting triangulation.<br />connectivity = REFORM(polygons, N_ELEMENTS(polygons))<br /><br />; Initialize a model for the display.<br />oModel = OBJ_NEW('IDLgrModel')<br /><br />; Initialize a polygon object to contain the mesh.<br />oPolygon = OBJ_NEW('IDLgrPolygon', vertices, $<br />&#160;&#160;&#160;POLYGONS = connectivity, COLOR = [0, 128, 0], $<br />&#160;&#160;&#160;STYLE = 1)<br /><br />; Add the polygon to the model.<br />oModel-&gt;Add, oPolygon<br /><br />; Display the model.<br />XOBJVIEW, oModel, /BLOCK, $<br />&#160;&#160;&#160;TITLE = 'Original Mesh'<br /><br />; Introduce an irregular vertex by drastically changing<br />; a single y coordinate.<br />vertices[1, 45] = 10.<br /><br />; Update polygon with new vertices.<br />oPolygon-&gt;SetProperty, DATA = vertices<br /><br />; Display change.<br />XOBJVIEW, oModel, /BLOCK, $<br />&#160;&#160;&#160;TITLE = 'Mesh with New Irregular Vertex'</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Smooth entire mesh to reduce the effect of the<br />; irregular vertex.<br />smoothedVertices = MESH_SMOOTH(vertices, connectivity)<br /><br />; Update polygon and display results.<br />oPolygon-&gt;SetProperty, DATA = smoothedVertices<br />XOBJVIEW, oModel, /BLOCK, $<br />&#160;&#160;&#160;TITLE = 'Smoothing with No Fixed Vertices'<br /><br />; Determine which vertices should be fixed.  Basically,<br />; all of the vertices should be fixed except for the<br />; irregular vertex.<br />fixed = LINDGEN((nX*nY) - 1)<br />fixed[45] = fixed[45:*] + 1<br /><br />; Smooth mesh with resulting fixed vertices.<br />smoothedVertices = MESH_SMOOTH(vertices, connectivity, $<br />&#160;&#160;&#160;FIXED_VERTICES = fixed)<br /><br />; Update polygon and display results.<br />oPolygon-&gt;SetProperty, DATA = smoothedVertices<br />XOBJVIEW, oModel, /BLOCK, $<br />&#160;&#160;&#160;TITLE = 'Smoothing with Almost All Vertices Fixed'<br /><br />; Cleanup object references.<br />OBJ_DESTROY, [oModel]</p>
        <p>The results for this example are shown in the following figure: the spiked mesh (left), and the two smoothed meshes (right).</p>
        <p>
            <img src="../../images/mesh_smooth.gif" style="margin-left: 13.5px;margin-top: 4.5px;margin-right: 8.399536px;margin-bottom: 9.308167px;" />
        </p>
        <h2 class="API"><a name="M_824365677_970702"></a><a name="M_824365677_970702_PageTOC_MESH_SMOOTH_"></a>Version History</h2>
        <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>5.5</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API"><a name="M_824365677_972977"></a><a name="M_824365677_972977_PageTOC_MESH_SMOOTH_"></a>See Also</h2>
        <p><a href="MESH_CLIP.htm#M_824365677_888450">MESH_CLIP</a>, <a href="MESH_DECIMATE.htm#M_824365677_953124">MESH_DECIMATE</a>, <a href="MESH_ISSOLID.htm#M_824365677_929914">MESH_ISSOLID</a>, <a href="MESH_MERGE.htm#M_824365677_929930">MESH_MERGE</a>, <a href="MESH_NUMTRIANGLES.htm#M_824365677_929942">MESH_NUMTRIANGLES</a>, <a href="MESH_OBJ.htm#M_824365677_929903">MESH_OBJ</a>, <a href="MESH_SURFACEAREA.htm#M_824365677_929966">MESH_SURFACEAREA</a>, <a href="MESH_VALIDATE.htm#M_824365677_929978">MESH_VALIDATE</a>, <a href="MESH_VOLUME.htm#M_824365677_929990">MESH_VOLUME</a></p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>