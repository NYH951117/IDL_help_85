<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Routines (alphabetical)|Routines: W">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>WRITE_VIDEO</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/Description.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../images/ref_part1.htm">Routines (alphabetical)</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="W_list.htm">Routines: W</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">WRITE_VIDEO</span>
        </div>
        <h1><a name="kanchor2943"></a>WRITE_VIDEO</h1>
        <p>WRITE_VIDEO is a wrapper for <a href="../../Object Classes/File Format/IDLffVideoWrite.htm">IDLffVideoWrite</a>. This function provides a way to easily write video and/or audio streams to a video file. </p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>If you are writing both video and audio  to the same file, you must define both streams  before any data can be written.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>Frame counts may vary slightly depending on the method used to obtain the count. Variabilities in timestamps and video standards, discontinuities in the videos themselves, or differences in the types of frames may influence the apparent frame count.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>Animated GIF files do not contain header information on the frame rate, duration, or the number of frames. You may provide these values but they will be quietly ignored.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>WRITE_VIDEO is not available with the <a href="../../Creating IDL Programs/Distributing IDL Applications/VirtualMachineApplications/VirtualMachineApplicationsIntro.htm">IDL Virtual Machine</a>.</p>
        <p>For more information on video, please see the <a href="../../Creating IDL Programs/Application Programming/CreatingVideo.htm">Creating Video topic</a>.</p>
        <h2 class="API" data-mc-conditions="">Examples</h2>
        <p data-mc-conditions="">The following example uses a NASA video displaying the Coronal Mass Ejection (CME) event of August, 2012. The video is available online (see <a href="#Resource" class="selected">Resources and References</a>, below) or in the <code>\examples\data</code> directory of your IDL installation. </p>
        <p data-mc-conditions="">See the Examples in the <a href="../R/READ_VIDEO.htm">READ_VIDEO</a> and <a href="../Q/QUERY_VIDEO.htm">QUERY_VIDEO</a> topics for additional examples using this video.</p>
        <p class="Code">; Define the file to read.</p>
        <p class="Code">file = FILEPATH('CME.mp4', $</p>
        <p class="Code">&#160;&#160;&#160;SUBDIRECTORY=['examples','data'])</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Read a subset of the original video file, starting at</p>
        <p class="Code">; 5 seconds and ending at 15 seconds.</p>
        <p class="Code">myVid = READ_VIDEO(file, TIME_START=5, TIME_END=15)</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Write out the snippet stored in the myVid variable</p>
        <p class="Code">; but using a frame rate of 20 fps instead of the original</p>
        <p class="Code">; 29.97 fps, effectively slowing down playback.</p>
        <p class="Code">WRITE_VIDEO, 'TestCME_MP4.mp4', myVid, VIDEO_FPS=20</p>
        <p class="Code">&#160;</p>
        <p>You can now use your computer's default video player to view the snippet of video you just wrote.</p>
        <h2 class="API">Syntax</h2>
        <p class="Syntax">WRITE_VIDEO, <i><a href="#Filename" class="selected">Filename</a></i> [, <i><a href="#Data" class="selected"><i>Data</i></a></i>] [, <a href="#AUDIO_CH" class="selected">AUDIO_CHANNELS</a>=<i>value</i>] [, <a href="#AUDIO_CO" class="selected">AUDIO_CODEC</a>=<i>value</i>] [, <a href="#AUDIO_RA" class="selected">AUDIO_RATE</a>=<i>value</i>] [, <a href="#BIT_RATE" class="selected">BIT_RATE</a>=<i>value</i>] [, /<a href="#CLOSE" class="selected">CLOSE</a>]  [, <a href="#FORMAT" class="selected">FORMAT</a>=<i>string</i>] [, <a href="#HANDLE" class="selected">HANDLE</a>=<i>handle</i>]&#160;[, <a href="#METADATA" class="selected">METADATA</a>=<i>value</i>] [, <a href="#VIDEO_CO" class="selected">VIDEO_CODEC</a>=<i>value</i>] [, <a href="#VIDEO_DI" class="selected">VIDEO_DIMENSIONS</a>=<i>value</i>] [, <a href="#VIDEO_FP" class="selected">VIDEO_FPS</a>=<i>value</i>] </p>
        <h2 class="API">Return Value</h2>
        <p>None.</p>
        <h2 class="API">Arguments</h2>
        <h3 class="Argument"><a name="Filename"></a>Filename</h3>
        <p>Set this required argument to a string denoting the full path to a video file to write. If a file with the same name already exists, it will be overwritten. You can specify the file type by including a filename extension or by setting the optional FORMAT keyword. The IDL-supported file type extensions are:</p>
        <table class="TableStyle_Description" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Description.css');" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="TableStyle_Description_Head_0_0_RowSep_ColSep">
                        <p>Extension</p>
                    </th>
                    <th class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
                        <p>File Type</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
                        <p>.avi</p>
                    </td>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
                        <p>Audio Video Interleave</p>
                    </td>
                </tr>
                <tr class="Body-Body2">
                    <td class="TableStyle_Description_Body_1_0_RowEnd_ColSep">
                        <p>.mp4</p>
                    </td>
                    <td class="TableStyle_Description_Body_1_0_RowEnd_ColEnd">
                        <p>MPEG-4</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>If you specify HANDLE, then IDL ignores the Filename argument (although you must still supply it).</p>
        <h3 class="Argument"><a name="Data"></a>Data</h3>
        <p>Use this argument to specify the data to be written to the stream.</p>
        <p>For video, the data must be represented as bytes in the format [3, <i>w</i>, <i>h</i>] with <i>w</i> and <i>h</i> matching the stream's original width and height.</p>
        <p>For audio, the data must be represented as 16-bit integers and arranged in an array of the format [<i>n</i>, <i>s</i>] to write <i>s</i> samples (as many as desired) into <i>n</i> channels (<i>n</i> must match the number of channels in the stream). If you are writing one channel, [1, <i>s</i>] and [<i>s</i>] are functionally equivalent, and both formats are accepted.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>You may write to one video and one audio stream. Their order does not matter, and calls to WRITE_VIDEO may alternate between the two.</p>
        <h2 class="API">Keywords</h2>
        <h3 class="Keyword"><a name="AUDIO_CH"></a>AUDIO_CHANNELS</h3>
        <p>Set this keyword to the number of channels to use in the audio data. Values are either '1' for mono or '2' for stereo. This keyword is only used during the first call to WRITE_VIDEO and is ignored during any subsequent calls using a HANDLE. If you supply audio data, IDL will take the value  from the data and this keyword is then not necessary.</p>
        <h3><a name="AUDIO_CO"></a>AUDIO_CODEC</h3>
        <p>Set this keyword to the codec to use for encoding the audio data. For an audio stream in an MP4-format file, the default value is 'mp2'. For a list of all available codecs, see the CODECS* keywords in <a href="../Q/QUERY_VIDEO.htm">QUERY_VIDEO</a>. </p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>This keyword is only used during the first call to WRITE_VIDEO and is ignored during any subsequent calls using a HANDLE.</p>
        <h3 class="Keyword"><a name="AUDIO_RA"></a>AUDIO_RATE</h3>
        <p>Set this keyword to the audio sample rate in Hertz. Not all values are guaranteed to work, depending upon the codec used. Suggested values are 44100 (CD quality), 22050, and 11025. A value is required during the first time audio data is written, and will be ignored during any future calls to write audio data to the same file. </p>
        <h3 class="Keyword"><a name="BIT_RATE"></a>BIT_RATE</h3>
        <p>Set BIT_RATE to the target output data rate, in bits per second. Larger values produce higher quality audio/video, but the files will be larger. Actual results may be slightly larger or smaller. If not specified, IDL uses a reasonable value depending on the chosen CODEC.
</p>
        <h3 class="Keyword"><a name="CLOSE"></a>CLOSE</h3>
        <p>Set this keyword to close the file currently used in HANDLE.
        </p>
        <h3 class="Keyword"><a name="CODEC"></a>CODEC</h3>
        <p>Set this keyword to a string value specifying the codec to use. </p>
        <ul>
            <li value="1">For a video stream in an MP4-format file, the default value is 'MP4'. </li>
            <li value="2">For an audio stream in an MP4-format file, the default value is 'MP2'. </li>
        </ul>
        <p>For a list of all available codecs, see the <a href="../Q/QUERY_VIDEO.htm">CODEC_*</a> keywords in QUERY_VIDEO. This is only used during the first call to WRITE_VIDEO and is ignored during any subsequent calls using a HANDLE.</p>
        <h3 class="Keyword"><a name="FORMAT"></a>FORMAT</h3>
        <p>Set this keyword to a string indicating the container format (file type) to write. Alternatively, you can specify the file type by including a filename extension when setting Filename. The IDL-supported strings are:</p>
        <table class="TableStyle_Description" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Description.css');" cellspacing="0">
            <col class="Column-Column1" />
            <col class="Column-Column1" />
            <thead>
                <tr class="Head-Header1">
                    <th class="TableStyle_Description_Head_0_0_RowSep_ColSep">
                        <p>String</p>
                    </th>
                    <th class="TableStyle_Description_Head_0_0_RowSep_ColEnd">
                        <p>File Type</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="Body-Body1">
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColSep">
                        <p>'avi'</p>
                    </td>
                    <td class="TableStyle_Description_Body_0_0_RowSep_ColEnd">
                        <p>Audio Video Interleave</p>
                    </td>
                </tr>
                <tr class="Body-Body2">
                    <td class="TableStyle_Description_Body_1_0_RowEnd_ColSep">
                        <p>'mp4'</p>
                    </td>
                    <td class="TableStyle_Description_Body_1_0_RowEnd_ColEnd">
                        <p>MPEG-4</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>This keyword is only used during the first call to WRITE_VIDEO and is ignored during any subsequent calls using a HANDLE.</p>
        <h3 class="Keyword"><a name="HANDLE"></a>HANDLE</h3>
        <p>If set to a handle previously returned from a WRITE_VIDEO call, the file used in the handle will be used and the Filename argument will be ignored. If set to a named variable that is currently not a valid handle, IDL returns the handle for the current file in the variable and keeps the file open. </p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>If a HANDLE is used, make sure to close it  by specifying the CLOSE keyword along with the handle.</p>
        <h3 class="Keyword"><a name="METADATA"></a>METADATA</h3>
        <p>Set this keyword to a [2, <i>n</i>] element string array denoting <i>n</i> [key, value] pairs of metadata to be written to the file.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>Metadata must be written before any video or audio data.</p>
        <h3 class="Keyword"><a name="VIDEO_CO"></a>VIDEO_CODEC</h3>
        <p>Set this keyword to the codec to use for encoding the video data. For a video stream in an MP4-format file, the default value is 'mp4'. For a list of all available codecs, see the CODECS* keywords in <a href="../Q/QUERY_VIDEO.htm">QUERY_VIDEO</a>. This keyword is only used during the first call to WRITE_VIDEO and is ignored during any subsequent calls using HANDLE.</p>
        <h3><a name="VIDEO_DI"></a>VIDEO_DIMENSIONS</h3>
        <p>Set this keyword to a 2-element vector giving the size [width, height] of one frame of video data. This keyword is only used during the first call to WRITE_VIDEO and is ignored during any subsequent calls using HANDLE. If you supply video data, IDL will take the value  from the data and this keyword is then not necessary.</p>
        <h3 class="Keyword"><a name="VIDEO_FP"></a>VIDEO_FPS</h3>
        <p>Set this keyword to the frames per second at which the video file is meant to be played back. A value is required during the first time video data is written, and will be ignored during any future calls to write to the same file.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>Very low frame rates (&lt;5 FPS) can be problematic for many codecs and players. Rather than setting FPS this low,we recommend that you set some multiple of the desired frame rate and output each frame several times. Because of the way most codecs encode video, the increase in file size is usually negligible.</p>
        <h2 class="API">Version History</h2>
        <table style="mc-table-style: url('../../Resources/TableStyles/VersionTable.css');margin-left: 0;margin-right: auto;caption-side: top;" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>8.2.3</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2 class="API" data-mc-conditions=""><a name="Resource"></a>Resources and References</h2>
        <p data-mc-conditions="">The NASA "CME.mp4" video used in the example is courtesy of the Solar Dynamics Observatory (SDO) and the Solar and Heliospheric Observatory (SOHO). The file is available for download here:</p>
        <p data-mc-conditions=""><a href="http://www.nasa.gov/multimedia/videogallery/index.html?media_id=160387251">http://www.nasa.gov/multimedia/videogallery/index.html?media_id=160387251</a>
        </p>
        <p data-mc-conditions="">&#160;</p>
        <p data-mc-conditions="">A longer, similar video that can be substituted in the example code, is available for download here:</p>
        <p data-mc-conditions=""><a href="http://www.nasa.gov/mission_pages/sdo/news/coronal-rain.html">http://www.nasa.gov/mission_pages/sdo/news/coronal-rain.html</a>
        </p>
        <h2 class="API">See Also</h2>
        <p><a href="../../Creating IDL Programs/Application Programming/CreatingVideo.htm">Creating Video</a>, <a href="../../Object Classes/File Format/IDLffVideoRead.htm">IDLffVideoRead</a>, <a href="../../Object Classes/File Format/IDLffVideoWrite.htm">IDLffVideoWrite</a>, <a href="../Q/QUERY_VIDEO.htm">QUERY_VIDEO</a>, <a href="../R/READ_VIDEO.htm">READ_VIDEO</a> <![CDATA[ ]]></p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>