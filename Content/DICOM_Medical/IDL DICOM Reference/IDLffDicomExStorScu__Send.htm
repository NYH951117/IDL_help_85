<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Additional Topics|Medical Imaging in IDL|IDL DICOM Reference|IDLffDicomExStorScu">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>IDLffDicomExStorScu::Send</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix">  <![CDATA[ ]]></span><a class="MCBreadcrumbsLink" href="../../OtherTopics.htm">Additional Topics</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../Expanded DICOM Support in IDL/ExpandedDICOMFunctionality.htm">Medical Imaging in IDL</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="DICOMEX_GETCONFIGFILEPAT.htm">IDL DICOM Reference</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">IDLffDicomExStorScu::Send</span>
        </div>
        <h1 class="ObjMethod"><a name="dicom_ex_4010397576_1136419"></a><a name="dicom_ex_4010397576_50050"></a>IDLffDicomExStorScu::Send</h1>
        <p>The IDLffDicomExStorScu::Send function method transfers DICOM files to a remote Storage SCP node.</p>
        <ul>
            <li value="1">The send is complete (all files have been transferred)</li>
            <li value="2">The send encounters an error condition</li>
            <li value="3">The callback function defined by the <a href="IDLffDicomExStorScuProperties.htm#dicom_ex_4010397576_1136218">CALLBACK_FUNCTION</a> property returns zero</li>
        </ul>
        <h3>Properties Required For a Send</h3>
        <p>The <a href="IDLffDicomExStorScuProperties.htm#dicom_ex_4010397576_1136253">STORAGE_SCP</a> property must contain the name of a valid Application Entity that supports the Storage SCP service in order for the Send method to succeed. All to other properties used by the Send method have usable default values.</p>
        <h3>Callbacks and Send Status Information</h3>
        <p>If the <a href="IDLffDicomExStorScu.htm#dicom_ex_4010397576_1136218">CALLBACK_FUNCTION&#160;</a> property contains the name of an IDL function, that function is called each time a DICOM file is sent to the remote node. The function is called with an array of strings containing status information about the send operation as its first parameter. See <a href="IDLffDicomExStorScuProperties.htm#dicom_ex_4010397576_1136286">Using Callbacks With the IDLffDicomExStorScu Object</a> for a discussion of callback functions.</p>
        <h3>Canceling a Send</h3>
        <p>To cancel a send operation before all files are transferred, the callback function specified by the <a href="IDLffDicomExStorScu.htm#dicom_ex_4010397576_1136218">CALLBACK_FUNCTION&#160;</a>property must return zero.</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1136446"></a><a name="dicom_ex_4010397576_1136446_PageTOC_IDLffDicomExStorScu"></a>Syntax</h2>
        <p class="Syntax"><i>Result</i> = <i>Obj</i>-&gt;[<a href="IDLffDicomExStorScu.htm#dicom_ex_4010397576_1136079">IDLffDicomExStorScu</a>::]Send(<i>Files</i>)</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1136451"></a><a name="dicom_ex_4010397576_1136451_PageTOC_IDLffDicomExStorScu"></a>Return Value</h2>
        <p>This method returns the number of DICOM files that were successfully sent.</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1136453"></a><a name="dicom_ex_4010397576_1136453_PageTOC_IDLffDicomExStorScu"></a>Arguments</h2>
        <h3 class="Argument">Files</h3>
        <p>A scalar string or string array containing the fully qualified paths of the DICOM files to be transferred to the remote Storage SCP node.</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1136456"></a><a name="dicom_ex_4010397576_1136456_PageTOC_IDLffDicomExStorScu"></a>Keywords</h2>
        <p>None</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1136458"></a><a name="dicom_ex_4010397576_1136458_PageTOC_IDLffDicomExStorScu"></a>Example</h2>
        <p>The following example code shows how to programmatically configure a local Storage SCP, create a local Storage SCU Application Entity, and transfer files to the Storage SCP.</p>
        <p>To run the example, do the following:</p>
        <ol>
            <li value="1">Copy the example code and paste it into an IDL editor window or another text editor of your choice.</li>
            <li value="2">Save the file as <code>stor_scu_send_files.pro</code>.</li>
            <li value="3">Execute <code>stor_scu_send_files.pro</code> in IDL.</li>
        </ol>
        <p class="Code">PRO stor_scu_send_files</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Update the local user configuration file.</p>
        <p class="Code">; Note that in a production application, you would probably</p>
        <p class="Code">; not need to update the configuration file each time the</p>
        <p class="Code">; application runs.</p>
        <p class="Code">;</p>
        <p class="Code">; First create a new local user configuration object.</p>
        <p class="Code">ocfg = OBJ_NEW('IDLffDicomExCfg')</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Add the local IDL Storage SCP Application Entity to the </p>
        <p class="Code">; local configuration file. Note that 'my_stor_scp' must be </p>
        <p class="Code">; configured on the remote query/retrieve SCP node.</p>
        <p class="Code">ocfg-&gt;SetApplicationEntity, 'my_stor_scp_aen', $</p>
        <p class="Code">&#160;&#160;&#160;'my_stor_scp', 'localhost', 2510, $</p>
        <p class="Code">&#160;&#160;&#160;'Storage_SCP_Service_List', 'Storage_SCP'</p>
        <p class="Code">ocfg-&gt;SetValue, 'StorScpServiceAE', 'my_stor_scp_aen'</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Save the changes to the configuration file.</p>
        <p class="Code">ocfg-&gt;Commit</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Destroy the configuration file object.</p>
        <p class="Code">OBJ_DESTROY, ocfg</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Update the system configuration file.</p>
        <p class="Code">; Note that in a production application, you would probably</p>
        <p class="Code">; not need to update the configuration file each time the</p>
        <p class="Code">; application runs.</p>
        <p class="Code">;</p>
        <p class="Code">; First create a new system configuration object.</p>
        <p class="Code">ocfg = OBJ_NEW('IDLffDicomExCfg', /SYSTEM)</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Add the Storage SCP Application Entity to the system </p>
        <p class="Code">; configuration file. Note that 'my_stor_scp' must be</p>
        <p class="Code">; configured on the remote query/retrieve SCP node.</p>
        <p class="Code">ocfg-&gt;SetApplicationEntity, 'my_stor_scp_aen', $</p>
        <p class="Code">&#160;&#160;&#160;'my_stor_scp', 'localhost', 2510, $ &#160;&#160;&#160;'Storage_SCP_Service_List', 'Storage_SCP'</p>
        <p class="Code">ocfg-&gt;SetValue, 'StorScpServiceAE', 'my_stor_scp_aen'</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Set the Storage SCP directory to the temporary directory.</p>
        <p class="Code">tmpDir = FILEPATH('', /TMP)</p>
        <p class="Code">ocfg-&gt;SetValue, 'StorScpDir', tmpDir</p>
        <p class="Code">PRINT, 'stor scp dir = ', tmpDir</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Save the changes to the configuration file.</p>
        <p class="Code">ocfg-&gt;Commit</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Stop and restart the Storage SCP Service. Restarting is</p>
        <p class="Code">; necessary because we have changed the Storage SCP configuration.</p>
        <p class="Code">status = ocfg-&gt;StorageScpService('stop')</p>
        <p class="Code">PRINT, 'Stopping Storage SCP. Status: ', status</p>
        <p class="Code">WAIT, 5</p>
        <p class="Code">status = ocfg-&gt;StorageScpService('start')</p>
        <p class="Code">PRINT, 'Starting Storage SCP. Status: ', status</p>
        <p class="Code">WAIT, 5</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Destroy the configuration file object.</p>
        <p class="Code">OBJ_DESTROY, ocfg</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Select a file to transfer to the Storeage SCP.</p>
        <p class="Code">srcfn1 = FILEPATH('mr_brain.dcm',SUBDIR=['examples', 'data'])</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Create a new Storage SCU object and associate the Storage SCP.</p>
        <p class="Code">oss  = OBJ_NEW('IDLffDicomExStorScu')</p>
        <p class="Code">oss-&gt;SetProperty, STORAGE_SCP = 'my_stor_scp_aen'</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Transfer the file to the Storage SCP</p>
        <p class="Code">cnt = oss-&gt;Send(srcfn1)</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Report the number of files transferred.</p>
        <p class="Code">PRINT, 'Number of files transferred: ', cnt</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Destroy the Storage SCU object.</p>
        <p class="Code">OBJ_DESTROY, oss</p>
        <p class="Code">&#160;</p>
        <p class="Code">END</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1136532"></a><a name="dicom_ex_4010397576_1136532_PageTOC_IDLffDicomExStorScu"></a>Version History</h2>
        <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>6.3</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>