<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Additional Topics|Medical Imaging in IDL|IDL DICOM Reference|IDLffDicomEx">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>IDLffDicomEx::GetValueLength
</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/TableStyles/VersionTable.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../../OtherTopics.htm">Additional Topics</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../Expanded DICOM Support in IDL/ExpandedDICOMFunctionality.htm">Medical Imaging in IDL</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="DICOMEX_GETCONFIGFILEPAT.htm">IDL DICOM Reference</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">IDLffDicomEx::GetValueLength</span>
        </div>
        <h1 class="ObjMethod">IDLffDicomEx::GetValueLength
</h1>
        <p>The IDLffDicomEx::GetValueLength function method returns the length of all values or of a specified value (in bytes) in a standard DICOM attribute. This method allows you to return the length of values contained in public attributes. See <a href="IDLffDicomEx__GetPrivateValueLength.htm">IDLffDicomEx::GetPrivateValueLength</a> for information on returning the length of values within a private attribute.        </p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>GetValueLength will fail if you attempt to return a value for an attribute that does not exist or an attribute that has been removed. If you are not sure if an attribute exists use <a href="IDLffDicomEx__QueryValue.htm">IDLffDicomEx::QueryValue</a> before calling GetValueLength.</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1007790"></a><a name="dicom_ex_4010397576_1007790_PageTOC_IDLffDicomEx"></a>Syntax</h2>
        <p class="Syntax"><i>Result = Obj</i>-&gt;[<a href="IDLffDicomEx.htm">IDLffDicomEx</a>::]GetValueLength(<i>DicomTag</i> [,&#160;<a href="#dicom_ex_4010397576_1007804" class="selected">SEQID</a>=<i>integer</i>] [,&#160;<a href="#dicom_ex_4010397576_1007808" class="selected">VALUEINDEX</a>=<i>integer</i>])</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1007792"></a><a name="dicom_ex_4010397576_1007792_PageTOC_IDLffDicomEx"></a>Return Value</h2>
        <p>Returns a long integer indicating the length of one of the following:</p>
        <ul>
            <li value="1">The length (in bytes) of all values when the VAULEINDEX keyword is not set</li>
            <li value="2">The length (in bytes) of a single value specified by the VALUEINDEX keyword</li>
            <li value="3">The number of repeating groups contained within a sequence if the attribute identified by the <i>DicomTag </i>argument is a sequence </li>
        </ul>
        <h2 class="API"><a name="dicom_ex_4010397576_1007797"></a><a name="dicom_ex_4010397576_1007797_PageTOC_IDLffDicomEx"></a>Arguments</h2>
        <h3 class="Argument">DicomTag</h3>
        <p>A string that identifies the group and element of a DICOM attribute in the form 'XXXX,XXXX'. The <i>DicomTag</i> argument must reference a public tag. See <a href="../DICOM Resources/DICOMAttributes.htm">DICOM Attributes</a> for a list of tags.</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1007803"></a><a name="dicom_ex_4010397576_1007803_PageTOC_IDLffDicomEx"></a>Keywords</h2>
        <h3 class="Keyword"><a name="dicom_ex_4010397576_1007804"></a><a name="dicom_ex_4010397576_19893"></a>SEQID</h3>
        <p>Set this keyword only if retrieving the value of an attribute that exists within a sequence. Use this keyword to specify sequence identifier as follows:</p>
        <ul>
            <li value="1">Set to a non-zero value (a sequence identifier) indicating the sequence in which the value is contained. This sequence identifier may have been returned via a previous call to the GetValue method. </li>
            <li value="2">Set to 0 or do not specify this keyword to indicate the attribute exists at the root level of the DICOM file. This is the default. </li>
        </ul>
        <h3 class="Keyword"><a name="dicom_ex_4010397576_1007808"></a><a name="dicom_ex_4010397576_47626"></a>VALUEINDEX</h3>
        <p>Set this keyword to an integer indicating the one-based index number of the value for which to return the length. If not set, this method returns the length of a single value for a single-valued attribute, or the length of all values for a multi-valued attribute. </p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>An error will be issued if you specify a value larger than the number of values in the attribute.</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1007813"></a><a name="dicom_ex_4010397576_1007813_PageTOC_IDLffDicomEx"></a>Examples</h2>
        <h3>Returning Lengths Using GetValueLength</h3>
        <p>The following code accesses the value length of all values in the multi-valued Image Type attribute (0008,0008) as well as the length of the last value in this attribute by using the VALUEINDEX keyword.</p>
        <p class="Code">PRO read_vallength_doc</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Select a DICOM file to examine. </p>
        <p class="Code">sFile = DIALOG_PICKFILE( $</p>
        <p class="Code">    PATH=FILEPATH('',SUBDIRECTORY=['examples','data']), $</p>
        <p class="Code">    TITLE='Select DICOM Patient File', FILTER='*.dcm')</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Open the selected file in read-only mode.</p>
        <p class="Code"> oImg = OBJ_NEW('IDLffDicomEx', sfile)</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Print the length and value of the Image Type attribute.</p>
        <p class="Code">value = oImg-&gt;GetValue('0008,0008', count=vCount)</p>
        <p class="Code">vLength = oImg-&gt;GetValueLength('0008,0008')</p>
        <p class="Code">vLastLength = oImg-&gt;GetValueLength('0008,0008', VALUEINDEX=vCount)</p>
        <p class="Code">PRINT, 'Length of all values = ', vLength, ' for values = ', value</p>
        <p class="Code">PRINT, 'Length of last value = ', vLastLength</p>
        <p class="Code">&#160;</p>
        <p class="Code">END</p>
        <h3>Accessing Repeating Groups Using GetValueLength</h3>
        <p>The following code uses the GetValueLength method to return the number of repeating groups in a <a name="kanchor5586"></a>sequence. As this method will fail if the specified DICOM attribute does not exist in a file, the example is hard-coded to use the <code>us_test.dcm</code> file in the <code>examples/data</code> directory. </p>
        <p class="Code">PRO read_attributes_doc</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Select a DICOM file to examine. </p>
        <p class="Code">sFile = FILEPATH('us_test.dcm', $</p>
        <p class="Code">    SUBDIRECTORY=['examples','data'])</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Open the selected file in read-only mode.</p>
        <p class="Code"> oImg = OBJ_NEW('IDLffDicomEx', sfile)</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Return information from Sequence of Ultrasound Reigons.</p>
        <p class="Code">; When a sequence has multiple groups, the sequence identifier </p>
        <p class="Code">; returned by GetValue is a zero-based vector of values. </p>
        <p class="Code">vSeqId = oImg-&gt;GetValue('0018,6011', COUNT=vCount)</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Using GetValueLength in conjunction with a sequence returns the </p>
        <p class="Code">; number of repeating groups in the sequence. </p>
        <p class="Code">vSeqLength = oImg-&gt;GetValueLength('0018,6011')</p>
        <p class="Code">&#160;</p>
        <p class="Code">FOR i = 1, vSeqLength DO BEGIN</p>
        <p class="Code">   ; Return the length and value of each Region Location Max X1</p>
        <p class="Code">   ; (0018,601c) item for all groups within the sequence.  </p>
        <p class="Code">   vLength = oImg-&gt;GetValueLength('0018,601c', SEQID=vSeqId[i-1])</p>
        <p class="Code">   result = oImg-&gt;GetValue('0018,601c', SEQID=vSeqId[i-1])</p>
        <p class="Code">   Print, 'Sequence group ', i, + ' item length is ', vLength, + $</p>
        <p class="Code">      ' and value is  ', result</p>
        <p class="Code">ENDFOR</p>
        <p class="Code">&#160;</p>
        <p class="Code">END</p>
        <p>The following is printed to the Output Log window: </p>
        <p class="Code">Sequence group 1 item length is 4 and value is 625</p>
        <p class="Code">Sequence group 2 item length is 4 and value is 0</p>
        <p class="Code">Sequence group 3 item length is 4 and value is 0</p>
        <p class="Code">Sequence group 4 item length is 4 and value is 0</p>
        <p>The previous values are consistent with those shown in the following figure. The sequence for which the array of sequence identifiers was returned is shown on the first line. Notice that it is multi-valued, containing four repeating groups (only a portion of which are visible). The highlighted item indicates the first Region Location Max X1 attribute. The second corresponding attribute is shown near the bottom of the figure. </p>
        <p>
            <img src="../../Resources/Images/mv_seq.gif" />
        </p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>For information on writing the values of DICOM attributes to the output window or a file, see the <a href="IDLffDicomEx__EnumerateTags.htm"> IDLffDicomEx::EnumerateTags</a> method.</p>
        <h2 class="API"><a name="dicom_ex_4010397576_1036981"></a><a name="dicom_ex_4010397576_1036981_PageTOC_IDLffDicomEx"></a>Version History</h2>
        <table style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/VersionTable.css');" cellspacing="0" class="TableStyle_VersionTable">
            <col />
            <col />
            <tbody>
                <tr>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColSep">
                        <p>6.1</p>
                    </td>
                    <td class="TableStyle_VersionTable_Body_0_0_RowEnd_ColEnd">
                        <p>Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>