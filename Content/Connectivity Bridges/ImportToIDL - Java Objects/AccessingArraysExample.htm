<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-US" xml:lang="en-US" data-mc-search-type="Stem" data-mc-help-system-file-name="idl.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="non-print" data-mc-toc-path="Bridges|Java Import Bridge">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Accessing Arrays Example</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/Doc_Style.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="MCBreadcrumbsBox_0"><span class="MCBreadcrumbsPrefix"> </span><a class="MCBreadcrumbsLink" href="../Bridges.htm">Bridges</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbsSelf">Java Import Bridge</span><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Accessing Arrays Example</span>
        </div>
        <h1><a name="Accessing_Arrays_Example"></a><a name="kanchor5403"></a>Accessing Arrays Example</h1>
        <p>This example creates a two-dimensional array within a Java class, which is contained in a file named <i>array2d.java</i>. IDL then accesses this data through the ArrayDemo routine, which is in a file named <i>arraydemo.pro</i>.</p>
        <p class="Note" data-mc-autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>These files are located in the <i>resource/bridges/import/java/examples</i> directory of the IDL distribution. Run this example procedure by entering <i>arraydemo</i> at the IDL command prompt or view the file in an IDL Editor window by entering <i>.EDIT arraydemo.pro</i>.</p>
        <p>The <i><a name="kanchor5404"></a>array2d.java</i> file contains the following text for creating a two-dimensional array in Java:</p>
        <p class="Code">public class array2d</p>
        <p class="Code">{</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">short[][] m_as;</p>
        <p class="Code_Indented">long[][] m_aj;</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">// ctor</p>
        <p class="Code_Indented">public array2d()</p>
        <p class="Code_Indented">{</p>
        <p class="Code_Indented" style="text-indent: 20px;">int SIZE1 = 3;</p>
        <p class="Code_Indented" style="text-indent: 20px;">int SIZE2 = 4;</p>
        <p class="Code_Indented" style="text-indent: 20px;">&#160;</p>
        <p class="Code_Indented" style="text-indent: 20px;">// default ctor creates a fixed number of elements m_as = new short[SIZE1][SIZE2];</p>
        <p class="Code_Indented" style="text-indent: 20px;">m_aj = new long[SIZE1][SIZE2];</p>
        <p class="Code_Indented" style="text-indent: 20px;">&#160;</p>
        <p class="Code_Indented" style="text-indent: 20px;">for (int i=0; i&lt;SIZE1; i++)</p>
        <p class="Code_Indented" style="text-indent: 20px;">{</p>
        <p class="Code_Indented" style="text-indent: 40px;">for (int j=0; j&lt;SIZE2; j++)</p>
        <p class="Code_Indented" style="text-indent: 40px;">{</p>
        <p class="Code_Indented" style="text-indent: 60px;">m_as[i][j] = (short)(i*10+j);</p>
        <p class="Code_Indented" style="text-indent: 60px;">m_aj[i][j] = (long)(i*10+j);</p>
        <p class="Code_Indented" style="text-indent: 40px;">}</p>
        <p class="Code_Indented" style="text-indent: 20px;">}</p>
        <p class="Code_Indented">}</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">public void setShorts(short[][] _as)</p>
        <p class="Code_Indented">{</p>
        <p class="Code_Indented" style="text-indent: 20px;">m_as = _as;</p>
        <p class="Code_Indented">}</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">public short[][] getShorts()</p>
        <p class="Code_Indented">{</p>
        <p class="Code_Indented" style="text-indent: 20px;">return m_as;</p>
        <p class="Code_Indented">}</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">public short getShortByIndex(int i, int j)</p>
        <p class="Code_Indented">{</p>
        <p class="Code_Indented" style="text-indent: 20px;">return m_as[i][j];</p>
        <p class="Code_Indented">}</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">public void setLongs(long[][] _aj)</p>
        <p class="Code_Indented">{</p>
        <p class="Code_Indented" style="text-indent: 20px;">m_aj = _aj;</p>
        <p class="Code_Indented">}</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">public long[][] getLongs()</p>
        <p class="Code_Indented">{</p>
        <p class="Code_Indented" style="text-indent: 20px;">return m_aj;</p>
        <p class="Code_Indented">}</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">public long getLongByIndex(int i, int j)</p>
        <p class="Code_Indented">{</p>
        <p class="Code_Indented" style="text-indent: 20px;">return m_aj[i][j];</p>
        <p class="Code_Indented">}</p>
        <p class="Code">}</p>
        <p>The <i>arraydemo.pro</i> file contains the following text for accessing the two- dimensional array within IDL:</p>
        <p class="Code">PRO ArrayDemo</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; The Java class array2d creates 2 initial arrays, one</p>
        <p class="Code_Indented">; of longs and one of shorts. We can interrogate and</p>
        <p class="Code_Indented">; change this array.</p>
        <p class="Code_Indented">oJArr = OBJ_NEW('IDLJavaObject$ARRAY2D', 'array2d')</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; First, let’s see what is in the short array at index</p>
        <p class="Code_Indented">; (2,3).</p>
        <p class="Code_Indented">PRINT, 'array2d short(2, 3) = ', $</p>
        <p class="Code_Indented" style="text-indent: 20px;">oJArr -&gt; GetShortByIndex(2, 3), $</p>
        <p class="Code_Indented" style="text-indent: 20px;">'	(should be 23)’</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; Now, let’s copy the entire array from Java to IDL.</p>
        <p class="Code_Indented">shortArrIDL = oJArr-&gt;GetShorts()</p>
        <p class="Code_Indented">HELP, shortArrIDL</p>
        <p class="Code_Indented">PRINT, 'shortArrIDL[2, 3] = ', shortArrIDL[2, 3], $</p>
        <p class="Code_Indented" style="text-indent: 20px;">'	(should be 23)'</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; Let’s change this value... </p>
        <p class="Code_Indented">shortArrIDL[2, 3] = 999</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; ...and copy it back to Java...</p>
        <p class="Code_Indented">oJArr-&gt;SetShorts, shortArrIDL</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; ...now its value should be different.</p>
        <p class="Code_Indented">PRINT, 'array2d short(2, 3) = ', $</p>
        <p class="Code_Indented" style="text-indent: 20px;">oJArr-&gt;GetShortByIndex(2, 3), '	(should be 999)'</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; Let’s set our array to something different.</p>
        <p class="Code_Indented">oJArr -&gt; SetShorts, INDGEN(10, 8)</p>
        <p class="Code_Indented">PRINT, 'array2d short(0, 0) = ', $</p>
        <p class="Code_Indented" style="text-indent: 20px;">oJArr-&gt;GetShortByIndex(0, 0), '	(should be 0)'</p>
        <p class="Code_Indented">PRINT, 'array2d short(1, 0) = ', $</p>
        <p class="Code_Indented" style="text-indent: 20px;">oJArr-&gt;GetShortByIndex(1, 0), '	(should be 1)'</p>
        <p class="Code_Indented">PRINT, 'array2d short(2, 0) = ', $</p>
        <p class="Code_Indented" style="text-indent: 20px;">oJArr-&gt;GetShortByIndex(2, 0), '	(should be 2)'</p>
        <p class="Code_Indented">PRINT, 'array2d short(0, 1) = ', $</p>
        <p class="Code_Indented" style="text-indent: 20px;">oJArr-&gt;GetShortByIndex(0, 1), '	(should be 10)'</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; Array2d has a setLongs method, but b/c arrays do not</p>
        <p class="Code_Indented">; (currently) promote, the first call to setLongs works</p>
        <p class="Code_Indented">; but the second fails.</p>
        <p class="Code_Indented">oJArr-&gt;SetLongs, L64INDGEN(10, 8)</p>
        <p class="Code_Indented">PRINT, 'array2d long(0, 1) = ', $</p>
        <p class="Code_Indented" style="text-indent: 20px;">oJArr-&gt;GetLongByIndex(0, 1), '	(should be 10)'</p>
        <p class="Code_Indented" style="text-indent: 20px;">&#160;</p>
        <p class="Code_Indented">;PRINT, '(expecting an error on the next line...)'</p>
        <p class="Code_Indented">;oJArr-&gt;SetLongs, INDGEN(10,8)</p>
        <p class="Code_Indented">&#160;</p>
        <p class="Code_Indented">; Cleanup our object.</p>
        <p class="Code_Indented">OBJ_DESTROY, oJArr</p>
        <p class="Code">&#160;</p>
        <p class="Code">END</p>
        <p>After saving and compiling the above files (<i>array2d.java</i> in Java and <i>ArrayDemo.pro</i> in IDL), update the <i>jbexamples.jar</i> file in the <i>resource/bridges/import/java</i> directory with the new compiled class and run the ArrayDemo routine in IDL. The routine should produce the following results:</p>
        <p class="Code">array2d short(2, 3) = 23 (should be 23)</p>
        <p class="Code">SHORTARRIDL	INT = Array[3, 4]</p>
        <p class="Code">shortArrIDL[2, 3] = 23 (should be 23)</p>
        <p class="Code">array2d short(2, 3) = 999 (should be 999)</p>
        <p class="Code">array2d short(0, 0) = 0 (should be 0)</p>
        <p class="Code">array2d short(1, 0) = 1 (should be 1)</p>
        <p class="Code">array2d short(2, 0) = 2 (should be 2)</p>
        <p class="Code">array2d short(0, 1) = 10 (should be 10)</p>
        <p class="Code">array2d long(0, 1) = 10 (should be 10)</p>
        <div class="mp_footer">© <span class="DocumentTitleCopyrightYear">2015</span>&#160;<span class="DocumentTitleCopyrightCompanyName">Exelis Visual Information Solutions, Inc., a subsidiary of Harris Corporation</span>. All Rights Reserved. This information is not subject to the controls of the International Traffic in Arms Regulations (ITAR) or the Export Administration Regulations (EAR). However, this information may be restricted from transfer to various embargoed countries under U.S. laws and regulations.</div>
    </body>
</html>